(function(t,n,r,i){t.fn.flipBook=function(e){return this.each(function(){var t=new s;t.init(e,this)})};t.fn.shelfBook=function(e){return this.each(function(){var t=new o;t.init(e,this)})};t.fn.flipBook.options={css:"",pdf:"",pages:[],assets:{preloader:"/images/preloader.jpg",left:"/images/left.png",overlay:"/images/overlay.jpg"},startPage:1,pageWidth:1e3,pageHeight:1414,thumbnailWidth:100,thumbnailHeight:141,currentPage:true,btnNext:true,btnPrev:true,btnZoomIn:true,btnZoomOut:true,btnViews:false,btnHelp:true,btnToc:true,btnThumbs:true,btnShare:false,btnExpand:true,btnAddPhoto:false,btnTopTen:false,viewBook:true,viewTimeline:false,viewSlideshow:false,flipType:"3d",zoom:.8,zoomMin:.7,zoomMax:6,time1:500,transition1:"easeInQuad",time2:600,transition2:"easeOutQuad",social:[{name:"facebook",icon:"icon-facebook",url:"http://codecanyon.net"},{name:"twitter",icon:"icon-twitter",url:"http://codecanyon.net"},{name:"googleplus",icon:"icon-googleplus",url:"http://codecanyon.net"},{name:"linkedin",icon:"icon-linkedin",url:"http://codecanyon.net"},{name:"youtube",icon:"icon-youtube",url:"http://codecanyon.net"}],lightBox:false,lightboxTransparent:true,lightboxPadding:0,lightboxMargin:20,lightboxWidth:"75%",lightboxHeight:600,lightboxMinWidth:400,lightboxMinHeight:100,lightboxMaxWidth:9999,lightboxMaxHeight:9999,lightboxAutoSize:true,lightboxAutoHeight:false,lightboxAutoWidth:false,webgl:false,cameraDistance:2500,pan:0,panMax:5,panMin:-5,tilt:0,tiltMax:0,tiltMin:-60,bookX:0,bookY:0,bookZ:0,pageMaterial:"phong",pageShadow:false,pageHardness:1,coverHardness:4,pageSegmentsW:10,pageSegmentsH:3,pageShininess:25,pageFlipDuration:2,pointLight:false,pointLightX:0,pointLightY:0,pointLightZ:2e3,pointLightColor:16777215,pointLightIntensity:.1,directionalLight:false,directionalLightX:0,directionalLightY:0,directionalLightZ:1e3,directionalLightColor:16777215,directionalLightIntensity:.3,ambientLight:true,ambientLightColor:13421772,ambientLightIntensity:.2,spotLight:true,spotLightX:0,spotLightY:0,spotLightZ:5e3,spotLightColor:16777215,spotLightIntensity:.2,spotLightShadowCameraNear:.1,spotLightShadowCameraFar:1e4,spotLightCastShadow:true,spotLightShadowDarkness:.5};var s=function(){};s.prototype={init:function(e,i){var s=this;s.elem=i;s.$elem=t(i);s.options={};var o=r.createElement("div").style,u=function(){var e="t,webkitT,MozT,msT,OT".split(","),t,n=0,r=e.length;for(;n<r;n++){t=e[n]+"ransform";if(t in o){return e[n].substr(0,e[n].length-1)}}return false}(),a=function(e){if(u==="")return e;e=e.charAt(0).toUpperCase()+e.substr(1);return u+e},f=/android/gi.test(navigator.appVersion),l=/iphone|ipad/gi.test(navigator.appVersion),c=/hp-tablet/gi.test(navigator.appVersion),h=a("perspective")in o,p="ontouchstart"in n&&!c,d="onorientationchange"in n?"orientationchange":"resize",v=p?"touchend":"click",m=p?"touchstart":"mousedown",g=p?"touchmove":"mousemove",y=p?"touchend":"mouseup",b=p?"touchcancel":"mouseup",w=a("transform"),E=a("perspective"),S=a("transition"),x=a("transitionProperty"),T=a("transitionDuration"),N=a("transformOrigin"),C=a("transformStyle"),k=a("transitionTimingFunction"),L=a("transitionDelay"),A=a("backfaceVisibility");s.has3d=h;s.hasWebGl=Detector.webgl;s.hasTouch=p;s.RESIZE_EV=d;s.CLICK_EV=v;s.START_EV=m;s.MOVE_EV=g;s.END_EV=y;s.CANCEL_EV=b;s.transform=w;s.transitionProperty=x;s.transitionDuration=T;s.transformOrigin=N;s.transitionTimingFunction=k;s.transitionDelay=L;s.perspective=E;s.transformStyle=C;s.transition=S;s.backfaceVisibility=A;s.options=t.extend({},t.fn.flipBook.options,e);s.options.main=s;s.p=false;s.options.css==""?s.start():s.loadCSS(s.options.css)},start:function(){var e=t("#container").attr("current_view");this.started=true;if(this.options.viewBook){this.createBook();this.Book.updateVisiblePages();this.createTop10()}this.createMenuWrapper();this.createLeftMenu();this.createHelp();if(this.options.viewTimeline){this.createTimeline()}if(this.options.viewSlideshow){this.createSlideshow()}this.createNextTwenty();if(this.options.currentPage){this.createCurrentPage();this.updateCurrentPage()}if(this.options.currentPage){this.createMenu();this.createToc();this.createThumbs()}if(this.options.btnShare){this.createShareButtons();this.resize()}if(this.options.viewTimeline){this.initTimeline()}if(this.options.currentPage)this.changeView(e)},loadCSS:function(e){t("#flipBookCSS").remove();var n=this;t('<link rel="stylesheet" type="text/css" href="'+e+'" id="flipBookCSS" />').appendTo("head");t.ajax({url:e,success:function(e){n.start()}})},reloadCSS:function(e){t("#flipBookCSS").remove();t('<link rel="stylesheet" type="text/css" href="'+e+'" id="flipBookCSS" />').appendTo("head");var n=this;t.ajax({url:e,success:function(e){n.resize()}})},createBook:function(){var e=this;if(e.options.pages){if(e.options.pages.length%2!=0)alert("Number of pages must be even (2,4,6...)");e.wrapper=t(r.createElement("div")).addClass("main-wrapper");e.bookLayer=t(r.createElement("div")).addClass("flipbook-bookLayer").addClass("bookflipLayer").appendTo(e.wrapper);e.bookLayer[0].style[e.transformOrigin]="100% 100%";e.book=t(r.createElement("div")).addClass("book").appendTo(e.bookLayer);if(e.options.lightBox){e.lightbox=new FLIPBOOK.Lightbox(this,e.wrapper,e.options);if(e.options.lightboxTransparent==true){e.wrapper.css("background","none");e.bookLayer.css("background","none");e.book.css("background","none")}}else{e.wrapper.appendTo(e.$elem)}e.options.onTurnPageComplete=e.onTurnPageComplete;if(!e.has3d)e.options.flipType="2d";if(e.options.webgl&&e.hasWebGl){var i=e.options;i.pagesArr=e.options.pages;i.scroll=e.scroll;i.parent=e;e.Book=new FLIPBOOK.BookWebGL(e.book[0],i);e.webglMode=true}else{e.Book=new FLIPBOOK.Book(e.book[0],e.options);e.scroll=new iScroll(e.bookLayer[0],{wheelAction:"zoom",zoom:true,zoomMin:e.options.zoomMin,zoomMax:e.options.zoomMax,keepInCenterH:true,keepInCenterV:true,bounce:false});e.webglMode=false}e.Book.goToPage(Number(e.options.startPage)-1);var s=e.bookLayer.height();var o=s-45;e.bookLayer.css("height",o+"px");t(n).resize(function(){e.resize()})}else{alert("Pages can not be empty.")}},createTimeline:function(){var e=this;if(e.options.pages.length%2!=0)alert("Number of pages must be even (2,4,6...)");e.timeLayer=t(r.createElement("div")).addClass("flipbook-bookLayer").addClass("timelineLayer").appendTo(this.wrapper);e.timeLayer[0].style[e.transformOrigin]="100% 100%";e.timeline=t(r.createElement("div")).addClass("timeline").appendTo(e.timeLayer);if(e.options.lightBox){e.lightbox=new FLIPBOOK.Lightbox(this,e.wrapper,e.options);if(e.options.lightboxTransparent==true){e.timeLayer.css("background","none");e.timeline.css("background","none")}}else{e.wrapper.appendTo(e.$elem)}e.options.onTurnPageComplete=e.onTurnPageComplete;if(!e.has3d)e.options.flipType="2d";if(e.options.webgl&&e.hasWebGl){var n=e.options;n.pagesArr=e.options.pages;n.scroll=e.scroll;n.parent=e;e.Timeline=new FLIPBOOK.BookWebGL(e.book[0],n);e.webglMode=true}else{e.Timeline=new FLIPBOOK.Timeline(e.timeline[0],e.options);e.webglMode=false}e.Timeline.goToPage(Number(e.options.startPage)-1);var i=e.timeLayer.height();var s=i-45;e.timeLayer.css("height",s+"px")},createSlideshow:function(){var e=this;if(e.options.pages.length%2!=0)alert("Number of pages must be even (2,4,6...)");e.slideLayer=t(r.createElement("div")).addClass("flipbook-bookLayer").addClass("slideshowLayer").appendTo(this.wrapper);e.slideLayer[0].style[e.transformOrigin]="100% 100%";e.slideshow=t(r.createElement("div")).addClass("slideshow").appendTo(e.slideLayer);if(e.options.lightBox){e.lightbox=new FLIPBOOK.Lightbox(this,e.wrapper,e.options);if(e.options.lightboxTransparent==true){e.slideLayer.css("background","none");e.slideshow.css("background","none")}}else{e.wrapper.appendTo(e.$elem)}e.options.onTurnPageComplete=e.onTurnPageComplete;if(!e.has3d)e.options.flipType="2d";if(e.options.webgl&&e.hasWebGl){var i=e.options;i.pagesArr=e.options.pages;i.scroll=e.scroll;i.parent=e;e.Slideshow=new FLIPBOOK.BookWebGL(e.book[0],i);e.webglMode=true}else{e.Slideshow=new FLIPBOOK.Slideshow(e.slideshow[0],e.options);e.scroll=new iScroll(e.slideLayer[0],{zoom:true,zoomMin:e.options.zoomMin,zoomMax:e.options.zoomMax,keepInCenterH:true,keepInCenterV:true,bounce:false});e.webglMode=false}e.Slideshow.goToPage(Number(e.options.startPage)-1);var s=e.slideLayer.height();var o=s-45;e.slideLayer.css("height",o+"px");t(n).resize(function(){e.resize()})},createLeftMenu:function(){var e=this;this.leftMenu=t(r.createElement("div")).addClass("flipbook-leftMenu").addClass("col-md-3").appendTo(this.menuWrapper);var i=t(r.createElement("div")).appendTo(this.leftMenu).addClass("branding-small");if(e.options.btnAddPhoto){var s=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.leftMenu).bind(this.CLICK_EV,function(){t(".share_here").click()}).text("Add Photo").addClass("flipbook-menu-btn").addClass("addPhoto").addClass("skin-color")}if(e.options.btnTopTen){var o=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.leftMenu).bind(this.CLICK_EV,function(){var e=t("body").attr("user_name");var r="/books/"+e+"/top_10";n.location.href=r}).text("Top 10").addClass("flipbook-menu-btn").addClass("topTen").addClass("skin-color")}},createAddPhoto:function(){function n(n){var i=t(r.createElement("span")).appendTo(e.photoHolder).addClass("flipbook-addPhotoItem").addClass("skin-color").text(n)}var e=this;e.addPhotoCreated=true;this.photoHolder=t(r.createElement("div")).appendTo(this.menuWrapper).addClass("flipbook-addPhotoHolder").addClass("flipbook-addPhoto").addClass("skin-color-bg").addClass("invisible").addClass("transition");n("Add photos to this book");var i=t(r.createElement("div")).appendTo(this.photoHolder).addClass("arrow-down").css({position:"absolute",bottom:"-10px",right:"0"})},toggleAddPhoto:function(){if(this.options.btnAddPhoto){if(!this.addPhotoCreated)this.createAddPhoto();var e=t(".addPhotoOPen");var n=t(".addPhoto").position();this.photoHolder.css({display:"block",left:parseInt(n.left)-parseInt(36)+"px",width:"8%",height:"65px","max-height":"none"});this.photoHolder.toggleClass("invisible")}},createTop10:function(){var e=this;if(e.options.pages.length%2!=0)alert("Number of pages must be even (2,4,6...)");e.top10Layer=t(r.createElement("div")).addClass("flipbook-bookLayer").addClass("top10Layer").appendTo(this.wrapper);e.top10Layer[0].style[e.transformOrigin]="100% 100%"},createCurrentPage:function(){var e=this,n=this.webglMode?this.Book.pages.length*2:this.Book.pages.length;var i=e.options.startPage;this.currentPageCon=t(r.createElement("div")).addClass("flipbook-currentPage").addClass("col-md-6").appendTo(this.menuWrapper);this.paginationCon=t(r.createElement("div")).addClass("flipbook-paginationCon").appendTo(this.currentPageCon);var s=t(r.createElement("span")).attr("aria-hidden","true").appendTo(".slideshow").bind(this.CLICK_EV,function(){e.Slideshow.nextPage()}).addClass("icon-arrow-right-big");var o=t(r.createElement("span")).attr("aria-hidden","true").prependTo(".slideshow").bind(this.CLICK_EV,function(){e.Slideshow.prevPage()}).addClass("icon-arrow-left-big")},changePagination:function(){var e=this.currentView;var n=this;var i=n.options.startPage;console.log("current view is: "+e);this.paginationCon.html("");if(e=="Bookflip"){var s=this.webglMode?this.Book.pages.length*2:this.Book.pages.length;if(this.Book.rightIndex)i=this.Book.rightIndex;if(n.options.btnPrev){var o=t(r.createElement("span")).attr("aria-hidden","true").prependTo(this.paginationCon).bind(this.CLICK_EV,function(){n.Book.prevPage()}).addClass("fa").addClass("fa-angle-double-left").addClass("fa-2x").addClass("skin-color")}for(var u=1;u<s-2;u++){var a=t(r.createElement("span")).addClass("page-num").addClass("btn-"+u).addClass("skin-color").addClass("pagination").text(u+"-"+(u+1)).attr("title",String(u)).appendTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);if(n.Book.goingToPage!=e){if(!n.Book.animating){n.Book.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")}}});if(i==u||i==u+1){a.addClass("page-current");a.siblings().removeClass("page-current")}u++}if(n.options.btnNext){var f=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.paginationCon).bind(this.CLICK_EV,function(){n.Book.nextPage()}).addClass("fa").addClass("fa-angle-double-right").addClass("fa-2x").addClass("skin-color")}var l=t(r.createElement("span")).addClass("page-num").addClass("skin-color").addClass("pagination").text("Front").attr("title",String(0)).prependTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);if(n.Book.goingToPage!=e){if(!n.Book.animating){n.Book.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")}}});var l=t(r.createElement("span")).addClass("page-num").addClass("skin-color").addClass("pagination").text("Back").attr("title",String(s)).appendTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));if(n.Book.goingToPage!=e){if(!n.Book.animating){n.Book.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")}}})}if(e=="Timeline"){var s=this.Timeline.times.length;if(this.Timeline.rightIndex)i=this.Timeline.rightIndex;if(n.options.btnPrev){var o=t(r.createElement("span")).attr("aria-hidden","true").prependTo(this.paginationCon).bind(this.CLICK_EV,function(){n.Timeline.prevPage()}).addClass("fa").addClass("fa-angle-double-left").addClass("fa-2x").addClass("skin-color")}for(var u=1;u<s;u++){var a=t(r.createElement("span")).addClass("page-num").addClass("btn-"+u).addClass("skin-color").addClass("pagination").text(u).attr("title",String(u)).appendTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);n.Timeline.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")});if(i==u||i==u+1){a.addClass("page-current");a.siblings().removeClass("page-current")}}if(n.options.btnNext){var f=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.paginationCon).bind(this.CLICK_EV,function(){n.Timeline.nextPage()}).addClass("fa").addClass("fa-angle-double-right").addClass("fa-2x").addClass("skin-color")}var l=t(r.createElement("span")).addClass("page-num").addClass("skin-color").addClass("pagination").text("Start").attr("title",String(0)).prependTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);if(n.Timeline.goingToPage!=e){n.Timeline.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")}});var l=t(r.createElement("span")).addClass("page-num").addClass("skin-color").addClass("pagination").text("End").attr("title",Number(s)-1).appendTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);n.Timeline.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")})}if(e=="Slideshow"){var s=this.Slideshow.slides.length;if(this.Slideshow.rightIndex)i=this.Slideshow.rightIndex;if(n.options.btnPrev){var o=t(r.createElement("span")).attr("aria-hidden","true").prependTo(this.paginationCon).bind(this.CLICK_EV,function(){n.Slideshow.prevPage()}).addClass("fa").addClass("fa-angle-double-left").addClass("fa-2x").addClass("skin-color")}for(var u=1;u<s-1;u++){var a=t(r.createElement("span")).addClass("page-num").addClass("btn-"+u).addClass("skin-color").addClass("pagination").text(u).attr("title",String(u)).appendTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);n.Slideshow.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")});if(i==u||i==u+1){a.addClass("page-current");a.siblings().removeClass("page-current")}}if(n.options.btnNext){var f=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.paginationCon).bind(this.CLICK_EV,function(){n.Slideshow.nextPage()}).addClass("fa").addClass("fa-angle-double-right").addClass("fa-2x").addClass("skin-color")}var l=t(r.createElement("span")).addClass("page-num").addClass("skin-color").addClass("pagination").text("Start").attr("title",String(0)).prependTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);if(n.Slideshow.goingToPage!=e){n.Slideshow.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")}});var l=t(r.createElement("span")).addClass("page-num").addClass("skin-color").addClass("pagination").text("End").attr("title",Number(s)-1).appendTo(this.paginationCon).bind(this.CLICK_EV,function(){var e=Number(t(this).attr("title"));var r=t(".created_dates .created_date"+e).html();var i=r;t(".timelineLight").timeline("goTo",i);n.Slideshow.goToPage(e);t(this).addClass("page-current");t(this).siblings().removeClass("page-current");t("#page-front-cover").removeClass("page-cover");t("#page-back-cover").removeClass("page-cover")})}},createMenuWrapper:function(){var e=this;this.menuWrapper=t(r.createElement("div")).addClass("flipbook-menuWrapper").addClass("skin-color-bg").appendTo(this.wrapper)},createMenu:function(){var e=this;this.menu=t(r.createElement("div")).addClass("flipbook-menu").addClass("col-md-3").appendTo(this.menuWrapper);if(this.options.lightboxTransparent){}if(e.options.btnHelp){var n=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleHelp();e.toggleAddPhoto();e.toggleNext();e.toggleTopTen();e.toggleViews();setTimeout(function(){t(".flipbook-helpBg").removeClass("invisible").addClass("invisible");t(".flipbook-topTenHolder").removeClass("invisible").addClass("invisible");t(".flipbook-addPhotoHolder").removeClass("invisible").addClass("invisible");t(".flipbook-nextTwentyHolder").removeClass("invisible").addClass("invisible");t(".flipbook-helpHolder").removeClass("invisible").addClass("invisible");t(".flipbook-viewHolder").removeClass("invisible").addClass("invisible")},3e3)}).addClass("flipbook-menu-btn").addClass("fa").addClass("fa-question").addClass("skin-color")}if(e.options.btnToc){var i=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleToc()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-list").addClass("skin-color")}if(e.options.btnThumbs){var s=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleThumbs()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-layout").addClass("skin-color")}if(e.options.btnShare){this.btnShare=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleShare()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-share").addClass("skin-color")}if(THREEx.FullScreen.available()&&e.options.btnExpand){var o=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){if(t(r).fullScreen()!=null){if(t(r).fullScreen()==true){t(r).fullScreen(false);t(this).removeClass("icon-resize-shrink").addClass("icon-resize-enlarge")}else{t(r).fullScreen(true);t(this).removeClass("icon-resize-enlarge").addClass("icon-resize-shrink")}}}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-resize-enlarge").addClass("skin-color")}if(e.options.btnViews){var i=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleViews()}).hover(function(){e.toggleViewsHover()}).text("Change View").addClass("flipbook-menu-btn").addClass("icon-general").addClass("changeView").addClass("skin-color").css("line-height",2)}},createShareButtons:function(){function s(i){var s=t(r.createElement("span")).attr("aria-hidden","true").appendTo(e.shareButtons).addClass("flipbook-shareBtn").addClass(i.icon).addClass("icon-general").addClass("skin-color").bind(e.CLICK_EV,function(e){n.open(i.url,"_self")})}var e=this;this.shareButtons=t(r.createElement("span")).appendTo(this.bookLayer).addClass("flipbook-shareButtons").addClass("skin-color-bg").addClass("invisible").addClass("transition");var i;for(i=0;i<e.options.social.length;i++){s(e.options.social[i])}},createTopTen:function(){function s(n){var i=t(r.createElement("p")).appendTo(e.secondItem).text(n);}var e=this;e.topTenCreated=true;e.topTenHolder=t(r.createElement("div")).appendTo(this.menuWrapper).addClass("flipbook-topTenHolder").addClass("flipbook-topTen").addClass("skin-color-bg").addClass("invisible").addClass("transition");e.itemContainer=t(r.createElement("div")).appendTo(e.topTenHolder).addClass("row");e.secondItem=t(r.createElement("div")).appendTo(e.itemContainer).addClass("col-sm-12").addClass("skin-color").addClass("text-left");var n=new Array("1) HardCover for brands","2) How to create a book","3) How to embed");var i;for(i=0;i<n.length;i++){s(n[i])}var o=t(r.createElement("div")).appendTo(this.topTenHolder).addClass("arrow-down").css({position:"absolute",bottom:"-10px",left:"0"})},toggleTopTen:function(){if(!this.topTenCreated)this.createTopTen();var e=t(".topTenOpen");var n=t(".topTen").position();this.topTenHolder.css({display:"block",left:parseInt(n.left)+parseInt(24)+"px",width:"15%",height:"65px","max-height":"none"});this.topTenHolder.toggleClass("invisible")},createNextTwenty:function(){var e=this;e.nextTwentyCreated=true;e.nextTwentyHolder=t(r.createElement("div")).appendTo(this.menuWrapper).addClass("flipbook-nextTwentyHolder").addClass("flipbook-next").addClass("skin-color-bg").addClass("invisible").addClass("transition");var n=t(r.createElement("i")).appendTo(this.nextTwentyHolder).addClass("skin-color").text("View next 20 pages.");var n=t(r.createElement("div")).appendTo(this.nextTwentyHolder).addClass("arrow-down").css({position:"absolute",bottom:"-10px",left:"42%"})},toggleNext:function(){if(!this.nextTwentyCreated)this.createNextTwenty();var e=t(".nextOpen");var n=t(".flipbook-paginationCon").position();var r=t(".fa-angle-double-right").position();this.nextTwentyHolder.css({display:"block",left:parseInt(n.left+r.left+65)+"px",width:"130px",height:"65px","max-height":"none"});this.nextTwentyHolder.toggleClass("invisible")},createHelp:function(){var e=this;e.helpCreated=true;e.helpHolder=t(r.createElement("div")).appendTo(this.menuWrapper).addClass("flipbook-helpHolder").addClass("flipbook-help").addClass("skin-color-bg").addClass("invisible").addClass("transition").css({display:"block",right:"5px",width:"30px",height:"30px","max-height":"none",bottom:"80px"});var n=t(r.createElement("i")).appendTo(this.helpHolder).addClass("skin-color").addClass("fa").addClass("fa-times").bind(e.CLICK_EV,function(t){e.toggleAddPhoto();e.toggleNext();e.toggleTopTen();e.toggleViews();e.toggleHelp()});this.helpBg=t(r.createElement("div")).appendTo(this.menuWrapper).addClass("flipbook-helpBg").addClass("invisible").addClass("transition").css({position:"absolute",width:"100%",bottom:"44px",height:"75px",background:"rgba(0,0,0,0.5)","z-index":"-9"})},toggleHelp:function(){var e=this;if(!this.helpCreated)this.createHelp();var n=t(".topTenOpen");var r=n.position();this.helpHolder.toggleClass("invisible");this.helpBg.toggleClass("invisible")},zoomOut:function(){if(!this.webglMode){var e=this.scroll.scale/1.5<this.scroll.options.zoomMin?this.scroll.options.zoomMin:this.scroll.scale/1.5;this.scroll.zoom(this.bookLayer.width()/2,this.bookLayer.height()/2,e,400)}else this.Book.zoomTo(-2);this.Slideshow.zoomTo(-2)},zoomIn:function(){if(!this.webglMode){var e=this.scroll.scale*1.5>this.scroll.options.zoomMax?this.scroll.options.zoomMax:this.scroll.scale*1.5;this.scroll.zoom(this.bookLayer.width()/2,this.bookLayer.height()/2,e,400)}else this.Book.zoomTo(2);this.Slideshow.zoomTo(2)},toggleShare:function(){this.shareButtons.css("display","block");this.shareButtons.toggleClass("invisible")},createToc:function(){var e=this;this.tocHolder=t(r.createElement("div")).addClass("flipbook-tocHolder").addClass("invisible").appendTo(this.wrapper);this.toc=t(r.createElement("div")).addClass(".flipbook-toc").appendTo(this.tocHolder);e.tocScroll=new iScroll(e.tocHolder[0],{bounce:false});var n=t(r.createElement("span")).addClass("flipbook-tocTitle").addClass("skin-color-bg").addClass("skin-color").appendTo(this.toc);var i=t(r.createElement("span")).attr("aria-hidden","true").appendTo(n).css("float","right").css("position","absolute").css("top","0px").css("right","0px").css("cursor","pointer").css("font-size",".8em").addClass("icon-cross").addClass("icon-general").addClass("skin- color").bind(e.START_EV,function(t){e.toggleToc()});for(var s=0;s<this.options.pages.length;s++){if(this.options.pages[s].title=="")continue;if(typeof this.options.pages[s].title==="undefined")continue;var o=t(r.createElement("a")).attr("class","flipbook-tocItem").addClass("skin-color-bg").addClass("skin-color").attr("title",String(s+1)).appendTo(this.toc).bind(e.CLICK_EV,function(n){if(!e.tocScroll.moved){var r=Number(t(this).attr("title"))-1;if(e.Book.goingToPage!=r)e.Book.goToPage(r);e.Slideshow.goToPage(r)}});t(r.createElement("span")).appendTo(o).text(this.options.pages[s].title);t(r.createElement("span")).appendTo(o).attr("class","right").text(s+1)}e.tocScroll.refresh()},toggleToc:function(){this.tocHolder.toggleClass("invisible");this.tocScroll.refresh()},updateCurrentPage:function(){function E(e){return t(t(".pn"+e+" img")[0]).attr("src")}var e,i=this.Book.rightIndex,s=this.webglMode?this.Book.pages.length*2:this.Book.pages.length;if(i==0){e="1 / "+String(s)}else if(i==s){e=String(s)+" / "+String(s)}else{e=String(i)+","+String(i+1)+" / "+String(s)}t(".ajaxLoaderDiv").hide();var o=this.Book.rightIndex;var u=o-1;var a=1;var f=1;var l=1;var c=1;var h=1;var p=t('meta[name="description"]').attr("content");var d=n.location;var v=d.protocol+"//"+d.host;t(".pn"+o+' img[src="/images/right.png"').remove();t('.js-pageEnd img[src="/images/left.png"').remove();t(".pn"+o).addClass("right");var m=t("#ImgContainerDiv").html();m=m.split(",");var g=m.length;if(o>=16){var y=0;for(var b=21;b<=g+21;b++){var w=m[y];if(w){w=w.replace(/&/g,"&");t(".pn"+(b+1)+' img[src="/images/preloader.jpg"]').attr("src",w);y++}}}jQuery(".flipbook-page .fb-shareFront").unbind("click").on("click",function(e){var i=t(this).parent().parent().attr("page_number");e.preventDefault();e.stopPropagation();var s=E(i);s=s.split("src=");s=s[1].split("&h=");s=s[0];var o=r.title;var u=n.location.href;u=u.split("/");u=u[2];if(a==1){a=0;app_id=t("#pp_header").attr("app_id");FB.init({appId:app_id,xfbml:true,cookie:true});FB.ui({method:"feed",name:o,link:n.location.href,picture:s,caption:u,description:p},function(e){a=1;if(e&&e.post_id){alert("Post was published.")}else{alert("Post was not published.")}})}});jQuery(".flipbook-page .fb-share").unbind("click").on("click",function(e){var i=t(this).parent().parent();var s=i.attr("page_number");e.preventDefault();e.stopPropagation();var o=E(s);o=o.split("src=");var u=o[0];u=u.split("/");u=u[2];o=o[1].split("&h=");o=o[0];var f=r.title;if(a==1){a=0;app_id=t("#pp_header").attr("app_id");FB.login(function(e){a=1;if(e.authResponse){var r=FB.getAuthResponse()["accessToken"];FB.api("/me/picture?width=50&height=50&access_token="+r,function(e){var u=e.data.url;var a=E(s);a=a.replace("&h=1080&w=1485&zc=2","&h=48&w=90&zc=2");t(".createdPopDiv").remove();var l='<div class="bookDiv"><img src="'+a+'" /><h3>'+f+"</h3></div>";var c='<div id="dialog" class="createdPopDiv" title="Facebook Post"><div class="popPic"><img src="'+u+'" /></div><div class="popMsg"><textarea  name="fb_message" placeholder="Say something about this..." id="fb_message" style="display:block;width:100%;height:40px;"></textarea>'+l+"</div></div>";i.append(c);t("#dialog").dialog({modal:true,resizable:false,buttons:{Post:function(){var e=t("#fb_message").val()+"\r\n"+"- "+n.location.href;FB.api("/me/photos?access_token="+r,"post",{url:o,message:e,access_token:r},function(e){if(!e||e.error){alert("Error occured: "+JSON.stringify(e.error))}else{alert("Image posted on your wall.")}});t(this).dialog("close")},Cancel:function(){t(this).dialog("close")}}});t(".ui-dialog").each(function(){t(this).css("z-index","9999");t(this).css("width","400px")});t(".ui-dialog-buttonset button:nth-child(2)").addClass("cancel-button")})}else{alert("User cancelled login or did not fully authorize.")}},{scope:"publish_stream"})}});jQuery(".flipbook-page .twitter-share").unbind("click").click(function(e){var i=t(this).parent().parent().attr("page_number");e.preventDefault();e.stopPropagation();var s=r.title;var o="A HardCover book";var u="http://twitter.com/intent/tweet?url="+E(i)+"&text="+s+". "+o+" "+encodeURI(E(i))+" "+encodeURI(n.location.href)+"&hashtags=hardcover";if(f==1){f=0;newWindow=n.open(u,"_blank","width=700,height=260");newWindow.focus();t(newWindow.document).ready(function(){setTimeout(function(){f=1},1e3)})}});jQuery(".flipbook-page .pinterest-share").unbind("click").click(function(e){var i=t(this).parent().parent().attr("page_number");e.preventDefault();e.stopPropagation();var s=r.title;var o="A HardCover book";var u="//www.pinterest.com/pin/create/button/?url="+encodeURI(n.location.href)+"&media="+encodeURI(E(i))+"&description="+s+". "+o;if(l==1){l=0;newWindow=n.open(u,"_blank","width=700,height=260");newWindow.focus();t(newWindow.document).ready(function(){setTimeout(function(){l=1},1e3)})}});jQuery(".flipbook-page .email-share").unbind("click").click(function(e){var r=t(this).parent().parent().attr("page_number");e.preventDefault();e.stopPropagation();var i="mailto:?subject=HardCover&body=Check out my life in HardCover."+encodeURI(n.location.href);if(c==1){c=0;newWindow=n.open(i,"_parent","width=700,height=260");newWindow.focus();t(newWindow.document).ready(function(){setTimeout(function(){c=1},1e3)})}})},turnPageComplete:function(){this.animating=false;this.updateCurrentPage()},resize:function(){var e=this.bookLayer.width(),t=this.bookLayer.height(),n=this.book.width(),r=this.book.height(),i=this.menuWrapper.width();var s=this;if(e==0||t==0||n==0||r==0){setTimeout(function(){s.resize()},1e3);return}if(e/t>=n/r)this.fitToHeight(true);else this.fitToWidth(true);if(this.options.btnShare){var o=this.btnShare.offset().left;var u=this.bookLayer.offset().left;this.shareButtons.css("left",String(o-u)+"px")}},fitToHeight:function(e){var t=this.bookLayer.height();var n=this.book.height();if(e)this.ratio=t/n;this.fit(this.ratio,e);var r=this.currentView;if(r=="Slideshow")this.thumbsHorizontal();else this.thumbsVertical()},fitToWidth:function(e){var t=this.bookLayer.width();var n=this.book.width();if(e)this.ratio=t/n;this.fit(this.ratio,e);var r=this.currentView;if(r=="Slideshow")this.thumbsHorizontal();else this.thumbsVertical()},fit:function(e,t){if(!this.webglMode){e=t?this.ratio:this.scroll.scale;if(t){this.scroll.options.zoomMin=e*this.options.zoomMin;this.scroll.options.zoomMax=e*this.options.zoomMax}this.scroll.zoom(this.bookLayer.width()/2,this.bookLayer.height()/2,e*this.options.zoom,0)}},createViews:function(){var e=this;e.viewsCreated=true;this.viewHolder=t(r.createElement("div")).appendTo(this.menuWrapper).addClass("flipbook-viewHolder").addClass("flipbook-changeView").addClass("skin-color-bg").addClass("invisible").addClass("transition");var n;var i=[["Bookflip","bookflip-ico.jpg"],["Timeline","timeline-ico.jpg"],["Slideshow","slideshow-ico.jpg"]];for(n=0;n<i.length;n++){var s=i[n][0].replace(" ","_");this.btnCont=t(r.createElement("div")).appendTo(this.viewHolder).addClass("flipbook-changeView-item").addClass("flipbook-changeView-"+s);var o=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.btnCont).addClass("flipbook-viewBtn").text(i[n][0]).addClass("icon-general").addClass("skin-color").attr("title",i[n][0]).bind(e.CLICK_EV,function(n){var r=t(this).attr("title");var i=r.replace(" ","_");t(".flipbook-changeView-"+i).siblings().removeClass("active-view");t(".flipbook-changeView-"+i).addClass("active-view");e.changeView(r)})}t(".flipbook-changeView > .flipbook-changeView-item").first().addClass("active-view")},toggleViews:function(){if(!this.viewsCreated)this.createViews();var e=t(".changeView");var n=e.parent();var r=e.position();var i=n.position();var s=i.left+r.left-56+"px";this.viewHolder.css({display:"block",left:s,bottom:"44px;","max-height":"none","z-index":"100000"});this.viewHolder.toggleClass("invisible")},toggleViewsHover:function(){if(!this.viewsCreated)this.createViews();var e=t(".changeView");var n=e.parent();var r=e.position();var i=n.position();var s=i.left+r.left-56+"px";this.viewHolder.css({display:"block",left:s,bottom:"44px;","max-height":"none","z-index":"100000"});var o=this.viewHolder.hasClass("invisible");if(o){this.viewHolder.removeClass("invisible")}t(".flipbook-viewHolder").mouseenter(function(){t(this).removeClass("invisible")});t(".flipbook-viewHolder").mouseleave(function(){t(this).addClass("invisible")});t(e).mouseleave(function(){})},changeView:function(e){var n=this;var r=e.toLowerCase();if(e=="Timeline"){this.gotoTimeline()}n.currentView=e;this.changePagination();if(!this.thumbsCreated)this.createThumbs();if(e=="Slideshow"){t(".flipbook-helpBg").css("margin-bottom","52px");t(".flipbook-topTen").css("margin-bottom","52px");t(".flipbook-addPhoto").css("margin-bottom","52px");t(".flipbook-nextTwentyHolder").css("margin-bottom","52px");t(".flipbook-helpHolder").css("margin-bottom","52px");t(".flipbook-viewHolder").css("margin-bottom","52px");this.thumbsHorizontal();this.thumbHolder.css("display","block");this.thumbHolder.removeClass("invisible")}else{t(".flipbook-helpBg").css("margin-bottom","0px");t(".flipbook-topTen").css("margin-bottom","0px");t(".flipbook-addPhoto").css("margin-bottom","0px");t(".flipbook-nextTwentyHolder").css("margin-bottom","0px");t(".flipbook-helpHolder").css("margin-bottom","0px");t(".flipbook-viewHolder").css("margin-bottom","0px");this.thumbsVertical();this.thumbHolder.css("display","none");this.thumbHolder.addClass("invisible")}if(e=="Bookflip"){t(".buttonsFrontPage").show();t("#share_here_container").show()}else{t(".buttonsFrontPage").hide();t("#share_here_container").hide()}console.log("changing view to: "+e);t("#container").attr("current_view",e);t("."+r+"Layer").show();t("."+r+"Layer").siblings().hide();this.menuWrapper.show();if(this.viewsCreated)n.viewHolder.toggleClass("invisible")},createThumbs:function(){var e=this,n,i;e.thumbsCreated=true;e.thumbHolder=t(r.createElement("div")).addClass("flipbook-thumbHolder").addClass("invisible").appendTo(e.menuWrapper).css("position","absolute").css("display","none");e.thumbsContainer=t(r.createElement("div")).appendTo(e.thumbHolder).addClass("flipbook-thumbContainer").css("margin","0px").css("padding","0px").css("position","relative");e.thumbScroll=new iScroll(e.thumbHolder[0],{bounce:false});e.thumbs=[];for(var s=0;s<e.options.pages.length;s++){var o=e.options.pages[s].thumb;var u=0;if(o){var a=new FLIPBOOK.Thumb(t,e.Book,o,e.options.thumbnailWidth,e.options.thumbnailHeight,s);a.image.style[e.transform]="translateZ(0)";e.thumbs.push(a);t(a.image).attr("title",s+1).appendTo(e.thumbsContainer).bind(e.CLICK_EV,function(n){if(!e.thumbScroll.moved){var r=Number(t(this).attr("title"))-1;if(e.Book.goingToPage!=r)e.Book.goToPage(r);e.Slideshow.goToPage(r)}});a.loadImage()}}},toggleThumbs:function(){if(!this.thumbsCreated)this.createThumbs();this.thumbHolder.css("display","block");this.thumbHolder.toggleClass("invisible");var e=this.currentView;if(e=="Slideshow")this.thumbsHorizontal();else this.thumbsVertical()},thumbsVertical:function(){if(!this.thumbsCreated)return;var e=this.options.thumbnailWidth,t=this.options.thumbnailHeight*this.thumbs.length;var n=Number(this.bookLayer.height())-40;this.thumbHolder.css("width",String(e)+"px").css("height",n+"px").css("bottom","auto").css("left","auto").css("top","-"+n+"px").css("z-index","99999").css("overflow","hidden").css("right","0px");this.thumbsContainer.css("height",String(t)+"px").css("width",String(e)+"px").css("margin","0px");for(var r=0;r<this.thumbs.length;r++){var i=this.thumbs[r].image;i.style.top=String(r*this.options.thumbnailHeight)+"px";i.style.left="0px"}this.thumbScroll.hScroll=false;this.thumbScroll.vScroll=true;this.thumbScroll.refresh()},thumbsHorizontal:function(){if(!this.thumbsCreated)return;var e=this.options.thumbnailWidth*this.thumbs.length,n=this.options.thumbnailHeight;var i=t(r).width();var s=(i-e)/2;this.thumbHolder.css("width","100%").css("height",String(n)+"px").css("left","auto").css("right","auto").css("top","auto").css("bottom","45px").css("overflow","visible");this.thumbsContainer.css("height",String(n)+"px").css("width",String(e)+"px").css("margin","0px auto");for(var o=0;o<this.thumbs.length;o++){var u=this.thumbs[o].image;u.style.top="0px";u.style.left=String(o*this.options.thumbnailWidth)+"px"}this.thumbScroll.hScroll=true;this.thumbScroll.vScroll=false;this.thumbScroll.refresh()},toggleExpand:function(){if(THREEx.FullScreen.available()){if(THREEx.FullScreen.activated()){THREEx.FullScreen.cancel()}else{THREEx.FullScreen.request()}}},lightboxStart:function(){this.reloadCSS(this.options.css)},lightboxEnd:function(){if(THREEx.FullScreen.available()){if(THREEx.FullScreen.activated()){THREEx.FullScreen.cancel()}}},initTimeline:function(){var e=location.hash;e=e.replace("#","");var n=t(".created_dates .created_date"+e).html();var r=n;t(".timelineLight").timeline({openTriggerClass:".read_more",hideControles:true,startItem:r})},gotoTimeline:function(){var e=this.Book.rightIndex;var n=e-1;var r=t(".created_dates .created_date"+n).html();var i=r;t(".timelineLight").timeline("goTo",i)}};t.fn.shelfBook.options={css:"",pdf:"",pages:[],assets:{preloader:"images/preloader.jpg",left:"images/left.png",overlay:"images/overlay.jpg"},startPage:1,pageWidth:1e3,pageHeight:1414,thumbnailWidth:100,thumbnailHeight:141,currentPage:true,btnNext:true,btnPrev:true,btnZoomIn:true,btnZoomOut:true,btnToc:true,btnThumbs:true,btnShare:true,btnExpand:true,flipType:"3d",zoom:.8,zoomMin:.7,zoomMax:6,time1:500,transition1:"easeInQuad",time2:600,transition2:"easeOutQuad",social:[{name:"facebook",icon:"icon-facebook",url:"http://codecanyon.net"},{name:"twitter",icon:"icon-twitter",url:"http://codecanyon.net"},{name:"googleplus",icon:"icon-googleplus",url:"http://codecanyon.net"},{name:"linkedin",icon:"icon-linkedin",url:"http://codecanyon.net"},{name:"youtube",icon:"icon-youtube",url:"http://codecanyon.net"}],lightBox:false,lightboxTransparent:true,lightboxPadding:0,lightboxMargin:20,lightboxWidth:"75%",lightboxHeight:600,lightboxMinWidth:400,lightboxMinHeight:100,lightboxMaxWidth:9999,lightboxMaxHeight:9999,lightboxAutoSize:true,lightboxAutoHeight:false,lightboxAutoWidth:false,webgl:false,cameraDistance:2500,pan:0,panMax:5,panMin:-5,tilt:0,tiltMax:0,tiltMin:-60,bookX:0,bookY:0,bookZ:0,pageMaterial:"phong",pageShadow:false,pageHardness:1,coverHardness:4,pageSegmentsW:10,pageSegmentsH:3,pageShininess:25,pageFlipDuration:2,pointLight:false,pointLightX:0,pointLightY:0,pointLightZ:2e3,pointLightColor:16777215,pointLightIntensity:.1,directionalLight:false,directionalLightX:0,directionalLightY:0,directionalLightZ:1e3,directionalLightColor:16777215,directionalLightIntensity:.3,ambientLight:true,ambientLightColor:13421772,ambientLightIntensity:.2,spotLight:true,spotLightX:0,spotLightY:0,spotLightZ:5e3,spotLightColor:16777215,spotLightIntensity:.2,spotLightShadowCameraNear:.1,spotLightShadowCameraFar:1e4,spotLightCastShadow:true,spotLightShadowDarkness:.5};var o=function(){};o.prototype={init:function(e,i){var s=this;s.elem=i;s.$elem=t(i);s.options={};var o=r.createElement("div").style,u=function(){var e="t,webkitT,MozT,msT,OT".split(","),t,n=0,r=e.length;for(;n<r;n++){t=e[n]+"ransform";if(t in o){return e[n].substr(0,e[n].length-1)}}return false}(),a=function(e){if(u==="")return e;e=e.charAt(0).toUpperCase()+e.substr(1);return u+e},f=/android/gi.test(navigator.appVersion),l=/iphone|ipad/gi.test(navigator.appVersion),c=/hp-tablet/gi.test(navigator.appVersion),h=a("perspective")in o,p="ontouchstart"in n&&!c,d="onorientationchange"in n?"orientationchange":"resize",v=p?"touchend":"click",m=p?"touchstart":"mousedown",g=p?"touchmove":"mousemove",y=p?"touchend":"mouseup",b=p?"touchcancel":"mouseup",w=a("transform"),E=a("perspective"),S=a("transition"),x=a("transitionProperty"),T=a("transitionDuration"),N=a("transformOrigin"),C=a("transformStyle"),k=a("transitionTimingFunction"),L=a("transitionDelay"),A=a("backfaceVisibility");s.has3d=h;s.hasWebGl=Detector.webgl;s.hasTouch=p;s.RESIZE_EV=d;s.CLICK_EV=v;s.START_EV=m;s.MOVE_EV=g;s.END_EV=y;s.CANCEL_EV=b;s.transform=w;s.transitionProperty=x;s.transitionDuration=T;s.transformOrigin=N;s.transitionTimingFunction=k;s.transitionDelay=L;s.perspective=E;s.transformStyle=C;s.transition=S;s.backfaceVisibility=A;s.options=t.extend({},t.fn.flipBook.options,e);s.options.main=s;s.p=false;s.options.css==""?s.start():s.loadCSS(s.options.css)},start:function(){this.started=true;this.createBook();this.Book.updateVisiblePages();this.createMenu();if(this.options.currentPage){this.createCurrentPage();this.updateCurrentPage()}this.createToc();this.createThumbs();if(this.options.btnShare)this.createShareButtons();this.resize()},loadCSS:function(e){t("#flipBookCSS").remove();var n=this;t('<link rel="stylesheet" type="text/css" href="'+e+'" id="flipBookCSS" />').appendTo("head");t.ajax({url:e,success:function(e){n.start()}})},reloadCSS:function(e){t("#flipBookCSS").remove();t('<link rel="stylesheet" type="text/css" href="'+e+'" id="flipBookCSS" />').appendTo("head");var n=this;t.ajax({url:e,success:function(e){n.resize()}})},createBook:function(){var e=this;if(e.options.pages.length%2!=0)alert("Number of pages must be even (2,4,6...)");e.wrapper=t(r.createElement("div")).addClass("main-wrapper");e.bookLayer=t(r.createElement("div")).addClass("flipbook-bookLayer").appendTo(e.wrapper);e.bookLayer[0].style[e.transformOrigin]="100% 100%";e.book=t(r.createElement("div")).addClass("book").appendTo(e.bookLayer);if(e.options.lightBox){e.lightbox=new FLIPBOOK.Lightbox(this,e.wrapper,e.options);if(e.options.lightboxTransparent==true){e.wrapper.css("background","none");e.bookLayer.css("background","none");e.book.css("background","none")}}else{e.wrapper.appendTo(e.$elem)}e.options.onTurnPageComplete=e.onTurnPageComplete;if(!e.has3d)e.options.flipType="2d";if(e.options.webgl&&e.hasWebGl){var i=e.options;i.pagesArr=e.options.pages;i.scroll=e.scroll;i.parent=e;e.Book=new FLIPBOOK.BookWebGL(e.book[0],i);e.webglMode=true}else{e.Book=new FLIPBOOK.top10Book(e.book[0],e.options);e.scroll=new iScroll(e.bookLayer[0],{wheelAction:"zoom",zoom:true,zoomMin:e.options.zoomMin,zoomMax:e.options.zoomMax,keepInCenterH:true,keepInCenterV:true,bounce:false});e.webglMode=false}e.Book.goToPage(Number(e.options.startPage)-1);t(n).resize(function(){e.resize()})},createMenu:function(){var e=this;this.menuWrapper=t(r.createElement("div")).addClass("flipbook-menuWrapper").addClass("skin-color-bg").appendTo(this.wrapper);this.menu=t(r.createElement("div")).addClass("flipbook-menu").appendTo(this.menuWrapper);if(this.options.lightboxTransparent){}if(e.options.btnPrev){var n=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.Book.prevPage()}).addClass("icon-arrow-left").addClass("flipbook-menu-btn").addClass("icon-general").addClass("skin-color")}if(e.options.btnNext){var i=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.Book.nextPage()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-arrow-right").addClass("skin-color")}if(e.options.btnZoomIn){var s=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.zoomIn()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-zoom-in").addClass("skin-color")}if(e.options.btnZoomOut){var o=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.zoomOut()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-zoom-out").addClass("skin-color")}if(e.options.btnToc){var u=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleToc()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-list").addClass("skin-color")}if(e.options.btnThumbs){var a=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleThumbs()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-layout").addClass("skin-color")}if(e.options.btnShare){this.btnShare=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){e.toggleShare()}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-share").addClass("skin-color")}if(THREEx.FullScreen.available()&&e.options.btnExpand){var f=t(r.createElement("span")).attr("aria-hidden","true").appendTo(this.menu).bind(this.CLICK_EV,function(){if(THREEx.FullScreen.available()){if(THREEx.FullScreen.activated()){THREEx.FullScreen.cancel();t(this).removeClass("icon-resize-shrink").addClass("icon-resize-enlarge")}else{THREEx.FullScreen.request(e.wrapper[0]);t(this).removeClass("icon-resize-enlarge").addClass("icon-resize-shrink")}}}).addClass("flipbook-menu-btn").addClass("icon-general").addClass("icon-resize-enlarge").addClass("skin-color")}},createShareButtons:function(){function s(i){var s=t(r.createElement("span")).attr("aria-hidden","true").appendTo(e.shareButtons).addClass("flipbook-shareBtn").addClass(i.icon).addClass("icon-general").addClass("skin-color").bind(e.CLICK_EV,function(e){n.open(i.url,"_self")})}var e=this;this.shareButtons=t(r.createElement("span")).appendTo(this.bookLayer).addClass("flipbook-shareButtons").addClass("skin-color-bg").addClass("invisible").addClass("transition");var i;for(i=0;i<e.options.social.length;i++){s(e.options.social[i])}},zoomOut:function(){if(!this.webglMode){var e=this.scroll.scale/1.5<this.scroll.options.zoomMin?this.scroll.options.zoomMin:this.scroll.scale/1.5;this.scroll.zoom(this.bookLayer.width()/2,this.bookLayer.height()/2,e,400)}else this.Book.zoomTo(-2)},zoomIn:function(){if(!this.webglMode){var e=this.scroll.scale*1.5>this.scroll.options.zoomMax?this.scroll.options.zoomMax:this.scroll.scale*1.5;this.scroll.zoom(this.bookLayer.width()/2,this.bookLayer.height()/2,e,400)}else this.Book.zoomTo(2)},toggleShare:function(){this.shareButtons.toggleClass("invisible")},createCurrentPage:function(){var e=this;this.currentPage=t(r.createElement("input")).addClass("flipbook-currentPage").attr("type","text").addClass("skin-color").appendTo(this.menuWrapper).keyup(function(n){if(n.keyCode==13){var r=parseInt(t(this).val())-1;e.updateCurrentPage();e.Book.goToPage(r)}}).focus(function(e){t(this).val("")}).focusout(function(n){var r=parseInt(t(this).val())-1;e.updateCurrentPage();e.Book.goToPage(r)})},createToc:function(){var e=this;this.tocHolder=t(r.createElement("div")).addClass("flipbook-tocHolder").addClass("invisible").appendTo(this.wrapper);this.toc=t(r.createElement("div")).addClass(".flipbook-toc").appendTo(this.tocHolder);e.tocScroll=new iScroll(e.tocHolder[0],{bounce:false});var n=t(r.createElement("span")).addClass("flipbook-tocTitle").addClass("skin-color-bg").addClass("skin-color").appendTo(this.toc);var i=t(r.createElement("span")).attr("aria-hidden","true").appendTo(n).css("float","right").css("position","absolute").css("top","0px").css("right","0px").css("cursor","pointer").css("font-size",".8em").addClass("icon-cross").addClass("icon-general").addClass("skin- color").bind(e.START_EV,function(t){e.toggleToc()});for(var s=0;s<this.options.pages.length;s++){if(this.options.pages[s].title=="")continue;if(typeof this.options.pages[s].title==="undefined")continue;var o=t(r.createElement("a")).attr("class","flipbook-tocItem").addClass("skin-color-bg").addClass("skin-color").attr("title",String(s+1)).appendTo(this.toc).bind(e.CLICK_EV,function(n){if(!e.tocScroll.moved){var r=Number(t(this).attr("title"))-1;if(e.Book.goingToPage!=r)e.Book.goToPage(r)}});t(r.createElement("span")).appendTo(o).text(this.options.pages[s].title);t(r.createElement("span")).appendTo(o).attr("class","right").text(s+1)}e.tocScroll.refresh()},toggleToc:function(){this.tocHolder.toggleClass("invisible");this.tocScroll.refresh()},updateCurrentPage:function(){if(typeof this.currentPage==="undefined")return;var e,t=this.Book.rightIndex,n=this.webglMode?this.Book.pages.length*2:this.Book.pages.length;if(t==0){e="1 / "+String(n)}else if(t==n){e=String(n)+" / "+String(n)}else{e=String(t)+","+String(t+1)+" / "+String(n)}if(this.p&&this.options.pages.length!=24&&this.options.pages.length!=8)this.Book.rightIndex=0;this.currentPage.attr("value",e);this.currentPage.attr("size",this.currentPage.val().length)},turnPageComplete:function(){this.animating=false;this.updateCurrentPage()},resize:function(){var e=this.bookLayer.width(),t=this.bookLayer.height(),n=this.book.width(),r=this.book.height(),i=this.menuWrapper.width();var s=this;if(e==0||t==0||n==0||r==0){setTimeout(function(){s.resize()},1e3);return}if(e/t>=n/r)this.fitToHeight(true);else this.fitToWidth(true);if(this.options.btnShare){var o=this.btnShare.offset().left;var u=this.bookLayer.offset().left;this.shareButtons.css("left",String(o-u)+"px")}},fitToHeight:function(e){var t=this.bookLayer.height();var n=this.book.height();if(e)this.ratio=t/n;this.fit(this.ratio,e);this.thumbsVertical()},fitToWidth:function(e){var t=this.bookLayer.width();var n=this.book.width();if(e)this.ratio=t/n;this.fit(this.ratio,e);this.thumbsVertical()},fit:function(e,t){if(!this.webglMode){e=t?this.ratio:this.scroll.scale;if(t){this.scroll.options.zoomMin=e*this.options.zoomMin;this.scroll.options.zoomMax=e*this.options.zoomMax}this.scroll.zoom(this.bookLayer.width()/2,this.bookLayer.height()/2,e*this.options.zoom,0)}},createThumbs:function(){var e=this,n,i;e.thumbsCreated=true;e.thumbHolder=t(r.createElement("div")).addClass("flipbook-thumbHolder").addClass("invisible").appendTo(e.bookLayer).css("position","absolute").css("display","none");e.thumbsContainer=t(r.createElement("div")).appendTo(e.thumbHolder).addClass("flipbook-thumbContainer").css("margin","0px").css("padding","0px").css("position","relative");e.thumbScroll=new iScroll(e.thumbHolder[0],{bounce:false});e.thumbs=[];for(var s=0;s<e.options.pages.length;s++){var o=e.options.pages[s].thumb;var u=0;var a=new FLIPBOOK.Thumb(t,e.Book,o,e.options.thumbnailWidth,e.options.thumbnailHeight,s);a.image.style[e.transform]="translateZ(0)";e.thumbs.push(a);t(a.image).attr("title",s+1).appendTo(e.thumbsContainer).bind(e.CLICK_EV,function(n){if(!e.thumbScroll.moved){var r=Number(t(this).attr("title"))-1;if(e.Book.goingToPage!=r)e.Book.goToPage(r)}});a.loadImage()}},toggleThumbs:function(){if(!this.thumbsCreated)this.createThumbs();this.thumbHolder.css("display","block");this.thumbHolder.toggleClass("invisible");var e=this;this.thumbsVertical()},thumbsVertical:function(){if(!this.thumbsCreated)return;var e=this.options.thumbnailWidth,t=this.options.thumbnailHeight*this.thumbs.length;this.thumbHolder.css("width",String(e)+"px").css("height","100%").css("bottom","auto").css("left","auto").css("top","0px").css("right","0px");this.thumbsContainer.css("height",String(t)+"px").css("width",String(e)+"px");for(var n=0;n<this.thumbs.length;n++){var r=this.thumbs[n].image;r.style.top=String(n*this.options.thumbnailHeight)+"px";r.style.left="0px"}this.thumbScroll.hScroll=false;this.thumbScroll.vScroll=true;this.thumbScroll.refresh()},thumbsHorizontal:function(){if(!this.thumbsCreated)return;var e=this.options.thumbnailWidth*this.thumbs.length,t=this.options.thumbnailHeight;this.thumbHolder.css("width","auto").css("height",String(t)+"px").css("left","0px").css("right","auto").css("top","auto").css("bottom","0px");this.thumbsContainer.css("height",String(t)+"px").css("width",String(e)+"px");for(var n=0;n<this.thumbs.length;n++){var r=this.thumbs[n].image;r.style.top="0px";r.style.left=String(n*this.options.thumbnailWidth)+"px"}this.thumbScroll.hScroll=true;this.thumbScroll.vScroll=false;this.thumbScroll.refresh()},toggleExpand:function(){if(THREEx.FullScreen.available()){if(THREEx.FullScreen.activated()){THREEx.FullScreen.cancel()}else{THREEx.FullScreen.request()}}},lightboxStart:function(){this.reloadCSS(this.options.css)},lightboxEnd:function(){if(THREEx.FullScreen.available()){if(THREEx.FullScreen.activated()){THREEx.FullScreen.cancel()}}}};t.extend(t.easing,{def:"easeOutQuad",swing:function(e,n,r,i,s){return t.easing[t.easing.def](e,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t+n;return-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t+n;return r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t+n;return-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t*t+n;return r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){if(t==0)return n;if(t==i)return n+r;if((t/=i/2)<1)return r/2*Math.pow(2,10*(t-1))+n;return r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){if((t/=i/2)<1)return-r/2*(Math.sqrt(1-t*t)-1)+n;return r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i)==1)return n+r;if(!o)o=i*.3;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i)==1)return n+r;if(!o)o=i*.3;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;if(!o)o=i*.3*1.5;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);if(t<1)return-.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n;return u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,s,o){if(o==i)o=1.70158;return r*(t/=s)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,r,s,o){if(o==i)o=1.70158;return r*((t=t/s-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,r,s,o){if(o==i)o=1.70158;if((t/=s/2)<1)return r/2*t*t*(((o*=1.525)+1)*t-o)+n;return r/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+n},easeInBounce:function(e,n,r,i,s){return i-t.easing.easeOutBounce(e,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){if((t/=i)<1/2.75){return r*7.5625*t*t+n}else if(t<2/2.75){return r*(7.5625*(t-=1.5/2.75)*t+.75)+n}else if(t<2.5/2.75){return r*(7.5625*(t-=2.25/2.75)*t+.9375)+n}else{return r*(7.5625*(t-=2.625/2.75)*t+.984375)+n}},easeInOutBounce:function(e,n,r,i,s){if(n<s/2)return t.easing.easeInBounce(e,n*2,0,i,s)*.5+r;return t.easing.easeOutBounce(e,n*2-s,0,i,s)*.5+i*.5+r}})})(jQuery,window,document);var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.Book=function(e,t){var n=this,r,i=t.main;this.main=t.main;this.hasTouch=i.hasTouch;this.perspective=i.perspective;this.transform=i.transform;this.transformOrigin=i.transformOrigin;this.transformStyle=i.transformStyle;this.transition=i.transition;this.transitionDuration=i.transitionDuration;this.transitionDelay=i.transitionDelay;this.transitionProperty=i.transitionProperty;this.backfaceVisibility=i.backfaceVisibility;this.wrapper=typeof e=="object"?e:document.getElementById(e);jQuery(this.wrapper).addClass("flipbook-book");this.options={onTurnPageComplete:null,flipType:"2d",shadow1opacity:.7,shadow2opacity:.7};for(r in t)this.options[r]=t[r];this.pages=[];this.pageWidth=this.options.pageWidth;this.pageHeight=this.options.pageHeight;this.animating=false;this.rightIndex=0;this.onTurnPageComplete=this.options.onTurnPageComplete;var s=this.wrapper.style;s.width=String(2*this.pageWidth)+"px";s.height="100%";this.flipType=this.options.flipType;this.shadow1opacity=this.options.shadow1opacity;this.shadow2opacity=this.options.shadow2opacity;var o,u;this.shadowL=document.createElement("div");jQuery(this.shadowL).addClass("flipbook-shadowLeft").css("width",String(this.pageWidth)+"px").css("height",String(this.pageHeight)+"px");this.wrapper.appendChild(this.shadowL);this.shadowLVisible=true;this.shadowR=document.createElement("div");jQuery(this.shadowR).addClass("flipbook-shadowRight").css("width",String(this.pageWidth)+"px").css("height",String(this.pageHeight)+"px");this.wrapper.appendChild(this.shadowR);this.shadowRVisible=true;this.shadowRight();for(r=0;r<n.options.pages.length;r++){var a=n.options.pages.length;this.addPage(r,a);jQuery(this.pages[r].wrapper).attr("title",r+1).bind(n.main.CLICK_EV,function(e){function a(e,t){return Math.abs(e-t)<10}var t,r,i,s,o,u;t=n.main.scroll.x;r=n.xOnMouseDown;i=n.main.scroll.y;s=n.yOnMouseDown;o=n.zoomOnMouseUp;u=n.zoomOnMouseDown;if(n.main.scroll.moved||n.main.scroll.zoomed||n.zoomOnMouseDown!=n.main.scroll.scale)return;if(e.target.className=="flipbook-page-link")return;if(a(t,r)&&a(i,s)&&o===u){var f=Number(jQuery(this).attr("title"))-1;if(f==n.rightIndex){n.nextPage()}else{n.prevPage()}}}).bind(n.main.START_EV,function(e){n.zoomOnMouseDown=n.main.scroll.scale;n.xOnMouseDown=n.main.scroll.x;n.yOnMouseDown=n.main.scroll.y}).bind(n.main.END_EV,function(e){n.zoomOnMouseUp=n.main.scroll.scale;n.xOnMouseUp=n.main.scroll.x;n.yOnMouseUp=n.main.scroll.y})}this.pages[0].loadPage();this.pages[1].loadPage();if(this.pages.length>2)this.pages[2].loadPage();this.updateVisiblePages();jQuery(this.wrapper).on("DOMMouseScroll",function(e){e.preventDefault()});jQuery(this.wrapper).on("mousewheel",function(e){e.preventDefault()})};FLIPBOOK.Book.prototype.constructor=FLIPBOOK.Book;FLIPBOOK.Book.prototype={addPage:function(e,t){var n=new FLIPBOOK.Page(this.options.pages[e],this.pageWidth,this.pageHeight,this.pages.length,this,t);this.wrapper.appendChild(n.wrapper);this.pages.push(n)},goToPage:function(e){if(e<0||e>this.pages.length)return;if(this.animating)return;if(isNaN(e))return;this.goingToPage=e;e=e%2==1?e+1:e;if(e==0){this.rightIndex==this.pages.length?this.shadowNone():this.shadowRight()}else if(e==this.pages.length){this.rightIndex==0?this.shadowNone():this.shadowLeft()}var t,n,r,i;if(e<this.rightIndex){t=this.pages[this.rightIndex-1];n=this.pages[e];if(e>0){r=this.pages[e-1];if(this.flipType=="2d")r.expand();r.show()}if(this.flipType=="2d")n.contract();this.animatePages(t,n)}else if(e>this.rightIndex){t=this.pages[e-1];n=this.pages[this.rightIndex];if(e<this.pages.length){i=this.pages[e];if(this.flipType=="2d")i.expand();i.show()}if(this.flipType=="2d")t.contract();this.animatePages(n,t)}this.rightIndex=e;var s=e,o=this.pages.length;if(!(s%2))s--;if(s<0)s=0;if(s==o-1)s=o;var u=$(".flipbook-currentPage span[title='"+s+"']");u.addClass("page-current");u.siblings().removeClass("page-current");location.hash=s},animatePages:function(e,t){var n=this.rightIndex;$(".pn"+n+" #sharebuttons").hide();$(".pn"+(n+1)+" #sharebuttons").hide();this.animating=true;var r=this,i=r.options.time1,s=r.options.time2,o=r.options.transition1,u=r.options.transition2;e.show();jQuery(e.wrapper).css(r.transform,"rotateY(0deg)");if(this.flipType=="3d"){t.show();jQuery(t.wrapper).css("visibility","hidden");jQuery(e.wrapper).css("visibility","visible");jQuery(e.wrapper).css("text-indent","0px");jQuery(e.wrapper).css(r.transform,"rotateY(0deg)");var a=e.index<t.index?"-90":"90";jQuery(e.overlay).animate({opacity:r.shadow1opacity},{duration:i,easing:o});jQuery(e.wrapper).animate({textIndent:a},{step:function(e,t){jQuery(this).css(r.transform,"rotateY("+Math.round(e)+"deg)")},duration:i,easing:o,complete:function(){e.hide();e.hideVisibility();jQuery(t.wrapper).css("visibility","visible");jQuery(t.overlay).css("opacity",r.shadow1opacity);jQuery(t.overlay).animate({opacity:0},{duration:s,easing:u});jQuery(t.wrapper).css(r.transform,"rotateY("+a+"deg)");jQuery(t.wrapper).css("text-indent",String(-a)+"px");jQuery(t.wrapper).animate({textIndent:0},{step:function(e,t){jQuery(this).css(r.transform,"rotateY("+Math.round(e)+"deg)")},complete:function(){jQuery(e.wrapper).css(r.transform,"rotateY(0deg)");jQuery(e.wrapper).css("visibility","visible");jQuery(t.wrapper).css(r.transform,"rotateY(0deg)");jQuery(t.wrapper).css("visibility","visible")},duration:s,easing:u})}})}else{jQuery(e.wrapper).animate({width:0},i,o,function(){t.show();jQuery(t.wrapper).animate({width:t.width},s,u)})}setTimeout(function(){console.log("timeout! both");if(r.onTurnPageComplete)r.onTurnPageComplete.call(r);r.main.updateCurrentPage();r.animating=false;r.updateVisiblePages();e.overlay.style.opacity="0";jQuery(e.wrapper).css(r.transform,"rotateY(0deg)");jQuery(t.wrapper).css(r.transform,"rotateY(0deg)")},Number(i)+Number(s))},updateVisiblePages:function(){if(this.animating)return;for(var e=0;e<this.pages.length;e++){if(e<this.rightIndex-1||e>this.rightIndex){if(this.flipType=="2d")this.pages[e].contract();this.pages[e].hide()}else{if(this.flipType=="2d")this.pages[e].expand();this.pages[e].show()}if(this.rightIndex==0){if(this.flipType=="2d")this.pages[1].contract();this.pages[1].hide()}}var t=this.rightIndex,n=this.pages;if(t>2)n[t-3].loadPage();if(t>0)n[t-2].loadPage();if(t>0)n[t-1].loadPage();if(t<n.length)n[t].loadPage();if(t<n.length)n[t+1].loadPage();if(t<n.length-2)n[t+2].loadPage();if(t>0&&t<this.pages.length){this.shadowBoth()}else if(t==0){this.shadowRight()}else{this.shadowLeft()}$(".pn"+t+" #sharebuttons").show();$(".pn"+(t+1)+" #sharebuttons").show()},nextPage:function(){if(this.rightIndex==this.pages.length||this.animating)return;var e=this.rightIndex+2;this.goToPage(e)},prevPage:function(){if(this.rightIndex==0||this.animating)return;var e=this.rightIndex-2;if(e<0)e=0;this.goToPage(e)},shadowRight:function(){if(this.shadowLVisible){this.shadowLVisible=false;this.shadowL.style.display="none"}if(!this.shadowRVisible){this.shadowRVisible=true;this.shadowR.style.display="block"}},shadowLeft:function(){if(this.shadowRVisible){this.shadowRVisible=false;this.shadowR.style.display="none"}if(!this.shadowLVisible){this.shadowLVisible=true;this.shadowL.style.display="block"}},shadowBoth:function(){if(!this.shadowRVisible){this.shadowRVisible=true;this.shadowR.style.display="block"}if(!this.shadowLVisible){this.shadowLVisible=true;this.shadowL.style.display="block"}},shadowNone:function(){if(this.shadowRVisible){this.shadowRVisible=false;this.shadowR.style.display="none"}if(this.shadowLVisible){this.shadowLVisible=false;this.shadowL.style.display="none"}}};FLIPBOOK.Timeline=function(e,t){var n=this,r,i=t.main;this.main=t.main;this.hasTouch=i.hasTouch;this.perspective=i.perspective;this.transform=i.transform;this.transformOrigin=i.transformOrigin;this.transformStyle=i.transformStyle;this.transition=i.transition;this.transitionDuration=i.transitionDuration;this.transitionDelay=i.transitionDelay;this.transitionProperty=i.transitionProperty;this.backfaceVisibility=i.backfaceVisibility;this.wrapper=typeof e=="object"?e:document.getElementById(e);jQuery(this.wrapper).addClass("timelineLight");jQuery(this.wrapper).addClass("tl");this.options={onTurnPageComplete:null,flipType:"2d",shadow1opacity:.7,shadow2opacity:.7};for(r in t){this.options[r]=t[r]}this.times=[];this.pageWidth=this.options.pageWidth;this.pageHeight=this.options.pageHeight;this.rightIndex=0;var s=this.wrapper.style;s.width=String(2*this.pageWidth)+"px";s.height=String(this.pageHeight)+"px";for(r=0;r<n.options.pages.length;r++){var o=n.options.pages.length;this.addTime(r,o)}};FLIPBOOK.Timeline.prototype.constructor=FLIPBOOK.Timeline;FLIPBOOK.Timeline.prototype={addTime:function(e,t){var n=new Array;$(".created_dates span").each(function(){n.push($(this).attr("title"))});var r=false;if(typeof this.options.pages[n[e]]!=="undefined")r=true;if(r!=false){var i=new FLIPBOOK.Time(this.options.pages[n[e]],this.pageWidth,this.pageHeight,this.times.length,this,t);if(i.twrapper){this.wrapper.appendChild(i.twrapper);this.wrapper.appendChild(i.tLoader);this.times.push(i)}}},goToPage:function(e){if(e<0||e>this.times.length)return;if(isNaN(e))return;this.goingToPage=e;console.log("timeline going to page: "+e);this.rightIndex=e;var t=e,n=this.times.length;if(t<0)t=0;if(t==n+1)t=n+1;var r=$(".flipbook-currentPage span[title='"+t+"']");r.addClass("page-current");r.siblings().removeClass("page-current");location.hash=t},nextPage:function(){if(this.rightIndex==this.times.length)return;var e=this.rightIndex+1;var t=$(".created_dates .created_date"+e).html();var n=t;$(".timelineLight").timeline("goTo",n);this.goToPage(e)},prevPage:function(){console.log("prev: "+this.rightIndex);if(this.rightIndex==0)return;var e=this.rightIndex-1;if(e<0)e=0;var t=$(".created_dates .created_date"+e).html();var n=t;$(".timelineLight").timeline("goTo",n);this.goToPage(e)}};FLIPBOOK.Slideshow=function(e,t){var n=this,r,i=t.main;var s=location.hash;s=s.replace("#","");if(s=="")s=0;s++;this.main=t.main;this.hasTouch=i.hasTouch;this.perspective=i.perspective;this.transform=i.transform;this.transformOrigin=i.transformOrigin;this.transformStyle=i.transformStyle;this.transition=i.transition;this.transitionDuration=i.transitionDuration;this.transitionDelay=i.transitionDelay;this.transitionProperty=i.transitionProperty;this.backfaceVisibility=i.backfaceVisibility;this.wrapper=typeof e=="object"?e:document.getElementById(e);jQuery(this.wrapper).addClass("flipbook-book");jQuery(this.wrapper).css({position:"absolute",top:"-90px"});this.options={onTurnPageComplete:null,flipType:"2d",shadow1opacity:.7,shadow2opacity:.7};for(r in t)this.options[r]=t[r];this.options["flipType"]="2d";this.slides=[];var o=$(document).width();var u=$(document).height();var a=o*.9-80;var f=8/11*a;if(f>u-240){a=(u-240)/8*11-80;f=8/11*a}this.pageWidth=a;this.pageHeight=f;this.animating=false;this.rightIndex=0;this.onTurnPageComplete=this.options.onTurnPageComplete;var l=this.wrapper.style;l.width=String(this.pageWidth)+"px";l.height=String(this.pageHeight)+"px";this.flipType=this.options.flipType;this.shadow1opacity=this.options.shadow1opacity;this.shadow2opacity=this.options.shadow2opacity;var c,h;this.shadowL=document.createElement("div");jQuery(this.shadowL).addClass("flipbook-shadowLeft").css("width",String(this.pageWidth)+"px").css("height",String(this.pageHeight)+"px");this.wrapper.appendChild(this.shadowL);this.shadowLVisible=true;this.shadowR=document.createElement("div");jQuery(this.shadowR).addClass("flipbook-shadowRight").css("width",String(this.pageWidth)+"px").css("height",String(this.pageHeight)+"px");this.wrapper.appendChild(this.shadowR);this.shadowRVisible=true;this.shadowRight();for(r=0;r<n.options.pages.length;r++){var p=n.options.pages.length;this.addPage(r,p)}this.slides[0].loadPage();this.slides[1].loadPage();if(this.slides.length>2)this.slides[2].loadPage();this.updateVisiblePages();jQuery(this.wrapper).on("DOMMouseScroll",function(e){e.preventDefault()});jQuery(this.wrapper).on("mousewheel",function(e){e.preventDefault()})};FLIPBOOK.Slideshow.prototype.constructor=FLIPBOOK.Book;FLIPBOOK.Slideshow.prototype={addPage:function(e,t){if(typeof this.options.pages[e]!=="undefined")var n=this.options.pages[e].src;if(typeof n!=="undefined"&&n!="/images/preloader.jpg"){var r=new FLIPBOOK.Slide(this.options.pages[e],this.pageWidth,this.pageHeight,this.slides.length,this,t);this.wrapper.appendChild(r.wrapper);this.slides.push(r)}},goToPage:function(e){console.log(this.animating);if(e<0||e>this.slides.length)return;if(this.animating)return;if(isNaN(e))return;this.goingToPage=e;var t,n,r,i;if(e<this.rightIndex){t=this.slides[this.rightIndex-1];n=this.slides[e];if(e>0){r=this.slides[e-1];if(this.flipType=="2d")r.expand();r.show()}this.animatePages(t,n)}else if(e>this.rightIndex){t=this.slides[e];n=this.slides[this.rightIndex];if(e<this.slides.length){i=this.slides[e];if(this.flipType=="2d")i.expand();i.show()}this.animatePages(n,t)}console.log("slide going to page: "+e);this.rightIndex=e;var s=e,o=this.slides.length;if(s<0)s=0;if(s==o+1)s=o;var u=$(".flipbook-currentPage span[title='"+s+"']");u.addClass("page-current");u.siblings().removeClass("page-current");location.hash=s},animatePages:function(e,t){var n=this.rightIndex;$(".pn"+n+" #sharebuttons").show();$(".pn"+(n+1)+" #sharebuttons").show();this.animating=true;var r=this,i=r.options.time1,s=r.options.time2,o=r.options.transition1,u=r.options.transition2;e.show();setTimeout(function(){console.log("timeout! both");if(r.onTurnPageComplete)r.onTurnPageComplete.call(r);r.main.updateCurrentPage();r.animating=false;r.updateVisiblePages();e.overlay.style.opacity="0";jQuery(e.wrapper).css(r.transform,"rotateY(0deg)");jQuery(t.wrapper).css(r.transform,"rotateY(0deg)")},Number(i)+Number(s))},updateVisiblePages:function(){if(this.animating)return;for(var e=0;e<this.slides.length;e++){if(e<this.rightIndex-1||e>this.rightIndex){if(this.flipType=="2d")this.slides[e].contract();this.slides[e].hide()}else{if(this.flipType=="2d")this.slides[e].expand();this.slides[e].show()}if(this.rightIndex==0){if(this.flipType=="2d")this.slides[1].contract();this.slides[1].hide()}}var t=this.rightIndex,n=this.slides;if(t>2)n[t-3].loadPage();if(t>3)n[t-2].loadPage();if(t>2)n[t-1].loadPage();if(t<n.length)n[t].loadPage();if(t<n.length-1)n[t+1].loadPage();if(t<n.length-2)n[t+2].loadPage();$(".pn"+t+" #sharebuttons").show();$(".pn"+(t+1)+" #sharebuttons").show()},nextPage:function(){if(this.rightIndex>=this.slides.length-1)return;var e=this.rightIndex+1;this.goToPage(e)},prevPage:function(){if(this.rightIndex==0)return;var e=this.rightIndex-1;if(e<0)e=0;this.goToPage(e)},shadowRight:function(){if(this.shadowLVisible){this.shadowLVisible=false;this.shadowL.style.display="none"}if(!this.shadowRVisible){this.shadowRVisible=true;this.shadowR.style.display="block"}}};FLIPBOOK.top10Book=function(e,t){var n=this,r,i=t.main;this.main=t.main;this.hasTouch=i.hasTouch;this.perspective=i.perspective;this.transform=i.transform;this.transformOrigin=i.transformOrigin;this.transformStyle=i.transformStyle;this.transition=i.transition;this.transitionDuration=i.transitionDuration;this.transitionDelay=i.transitionDelay;this.transitionProperty=i.transitionProperty;this.backfaceVisibility=i.backfaceVisibility;this.wrapper=typeof e=="object"?e:document.getElementById(e);jQuery(this.wrapper).addClass("flipbook-book");this.options={onTurnPageComplete:null,flipType:"2d",shadow1opacity:.7,shadow2opacity:.7};for(r in t)this.options[r]=t[r];this.pages=[];this.pageWidth=this.options.pageWidth;this.pageHeight=this.options.pageHeight;this.animating=false;this.rightIndex=0;this.onTurnPageComplete=this.options.onTurnPageComplete;var s=this.wrapper.style;s.width=String(2*this.pageWidth)+"px";s.height=String(this.pageHeight)+"px";this.flipType=this.options.flipType;this.shadow1opacity=this.options.shadow1opacity;this.shadow2opacity=this.options.shadow2opacity;var o,u;this.shadowL=document.createElement("div");jQuery(this.shadowL).addClass("flipbook-shadowLeft").css("width",String(this.pageWidth)+"px").css("height",String(this.pageHeight)+"px");this.wrapper.appendChild(this.shadowL);this.shadowLVisible=true;this.shadowR=document.createElement("div");jQuery(this.shadowR).addClass("flipbook-shadowRight").css("width",String(this.pageWidth)+"px").css("height",String(this.pageHeight)+"px");this.wrapper.appendChild(this.shadowR);this.shadowRVisible=true;this.shadowRight();for(r=0;r<n.options.pages.length;r++){this.addPage(r);jQuery(this.pages[r].wrapper).attr("title",r+1).bind(n.main.CLICK_EV,function(e){function a(e,t){return Math.abs(e-t)<10}var t,r,i,s,o,u;t=n.main.scroll.x;r=n.xOnMouseDown;i=n.main.scroll.y;s=n.yOnMouseDown;o=n.zoomOnMouseUp;u=n.zoomOnMouseDown;if(n.main.scroll.moved||n.main.scroll.animating||n.main.scroll.zoomed||n.zoomOnMouseDown!=n.main.scroll.scale)return;if(e.target.className=="flipbook-page-link")return;if(a(t,r)&&a(i,s)&&o===u){var f=Number(jQuery(this).attr("title"))-1;if(f==n.rightIndex){n.nextPage()}else{n.prevPage()}}}).bind(n.main.START_EV,function(e){n.zoomOnMouseDown=n.main.scroll.scale;n.xOnMouseDown=n.main.scroll.x;n.yOnMouseDown=n.main.scroll.y}).bind(n.main.END_EV,function(e){n.zoomOnMouseUp=n.main.scroll.scale;n.xOnMouseUp=n.main.scroll.x;n.yOnMouseUp=n.main.scroll.y})}this.pages[0].loadPage();this.pages[1].loadPage();if(this.pages.length>2)this.pages[2].loadPage();this.updateVisiblePages();jQuery(this.wrapper).on("DOMMouseScroll",function(e){e.preventDefault()});jQuery(this.wrapper).on("mousewheel",function(e){e.preventDefault()})};FLIPBOOK.top10Book.prototype.constructor=FLIPBOOK.top10Book;FLIPBOOK.top10Book.prototype={addPage:function(e){var t=new FLIPBOOK.Page(this.options.pages[e],this.pageWidth,this.pageHeight,this.pages.length,this);this.wrapper.appendChild(t.wrapper);this.pages.push(t)},goToPage:function(e){if(e<0||e>this.pages.length)return;if(this.animating)return;if(isNaN(e))return;this.goingToPage=e;e=e%2==1?e+1:e;if(e==0){this.rightIndex==this.pages.length?this.shadowNone():this.shadowRight()}else if(e==this.pages.length){this.rightIndex==0?this.shadowNone():this.shadowLeft()}var t,n,r,i;if(e<this.rightIndex){t=this.pages[this.rightIndex-1];n=this.pages[e];if(e>0){r=this.pages[e-1];if(this.flipType=="2d")r.expand();r.show()}if(this.flipType=="2d")n.contract();this.animatePages(t,n)}else if(e>this.rightIndex){t=this.pages[e-1];n=this.pages[this.rightIndex];if(e<this.pages.length){i=this.pages[e];if(this.flipType=="2d")i.expand();i.show()}if(this.flipType=="2d")t.contract();this.animatePages(n,t)}this.rightIndex=e},animatePages:function(e,t){this.animating=true;var n=this,r=n.options.time1,i=n.options.time2,s=n.options.transition1,o=n.options.transition2;e.show();jQuery(e.wrapper).css(n.transform,"rotateY(0deg)");if(this.flipType=="3d"){t.show();jQuery(t.wrapper).css("visibility","hidden");jQuery(e.wrapper).css("visibility","visible");jQuery(e.wrapper).css("text-indent","0px");jQuery(e.wrapper).css(n.transform,"rotateY(0deg)");var u=e.index<t.index?"-90":"90";jQuery(e.overlay).animate({opacity:n.shadow1opacity},{duration:r,easing:s});jQuery(e.wrapper).animate({textIndent:u},{step:function(e,t){jQuery(this).css(n.transform,"rotateY("+Math.round(e)+"deg)")},duration:r,easing:s,complete:function(){e.hide();e.hideVisibility();jQuery(t.wrapper).css("visibility","visible");jQuery(t.overlay).css("opacity",n.shadow1opacity);jQuery(t.overlay).animate({opacity:0},{duration:i,easing:o});jQuery(t.wrapper).css(n.transform,"rotateY("+u+"deg)");jQuery(t.wrapper).css("text-indent",String(-u)+"px");jQuery(t.wrapper).animate({textIndent:0},{step:function(e,t){jQuery(this).css(n.transform,"rotateY("+Math.round(e)+"deg)")},complete:function(){jQuery(e.wrapper).css(n.transform,"rotateY(0deg)");jQuery(e.wrapper).css("visibility","visible");jQuery(t.wrapper).css(n.transform,"rotateY(0deg)");jQuery(t.wrapper).css("visibility","visible")},duration:i,easing:o})}})}else{jQuery(e.wrapper).animate({width:0},r,s,function(){t.show();jQuery(t.wrapper).animate({width:t.width},i,o)})}setTimeout(function(){console.log("timeout! both");if(n.onTurnPageComplete)n.onTurnPageComplete.call(n);n.main.updateCurrentPage();n.animating=false;n.updateVisiblePages();e.overlay.style.opacity="0";jQuery(e.wrapper).css(n.transform,"rotateY(0deg)");jQuery(t.wrapper).css(n.transform,"rotateY(0deg)")},Number(r)+Number(i))},updateVisiblePages:function(){if(this.animating)return;for(var e=0;e<this.pages.length;e++){if(e<this.rightIndex-1||e>this.rightIndex){if(this.flipType=="2d")this.pages[e].contract();this.pages[e].hide()}else{if(this.flipType=="2d")this.pages[e].expand();this.pages[e].show()}if(this.rightIndex==0){if(this.flipType=="2d")this.pages[1].contract();this.pages[1].hide()}}var t=this.rightIndex,n=this.pages;if(t>2)n[t-3].loadPage();if(t>0)n[t-2].loadPage();if(t>0)n[t-1].loadPage();if(t<n.length)n[t].loadPage();if(t<n.length)n[t+1].loadPage();if(t<n.length-2)n[t+2].loadPage();if(t>0&&t<this.pages.length){this.shadowBoth()}else if(t==0){this.shadowRight()}else{this.shadowLeft()}},nextPage:function(){if(this.rightIndex==this.pages.length||this.animating)return;this.goToPage(this.rightIndex+2)},prevPage:function(){if(this.rightIndex==0||this.animating)return;this.goToPage(this.rightIndex-2)},shadowRight:function(){if(this.shadowLVisible){this.shadowLVisible=false;this.shadowL.style.display="none"}if(!this.shadowRVisible){this.shadowRVisible=true;this.shadowR.style.display="block"}},shadowLeft:function(){if(this.shadowRVisible){this.shadowRVisible=false;this.shadowR.style.display="none"}if(!this.shadowLVisible){this.shadowLVisible=true;this.shadowL.style.display="block"}},shadowBoth:function(){if(!this.shadowRVisible){this.shadowRVisible=true;this.shadowR.style.display="block"}if(!this.shadowLVisible){this.shadowLVisible=true;this.shadowL.style.display="block"}},shadowNone:function(){if(this.shadowRVisible){this.shadowRVisible=false;this.shadowR.style.display="none"}if(this.shadowLVisible){this.shadowLVisible=false;this.shadowL.style.display="none"}}};FLIPBOOK.Page=function(e,t,n,r,i,s){this.wrapper=document.createElement("div");jQuery(this.wrapper).addClass("flipbook-page");this.s=this.wrapper.style;this.s.width=String(t)+"px";this.s.height=String(n)+"px";this.index=r;this.book=i;this.width=t;this.height=n;this.invisible=false;this.image=new Image;this.image.src=i.options.assets.preloader;this.imageSrc=e.src;this.wrapper.appendChild(this.image);this.imageLoader=new Image;this.overlay=new Image;this.overlay.src=i.options.assets.overlay;this.wrapper.appendChild(this.overlay);this.overlay.style.opacity="0";this.expanded=true;this.htmlContent=e.htmlContent;if(this.index%2==0){this.s.zIndex=String(100-this.index);this.s.left="50%";this.right(this.image);this.right(this.overlay)}else{if(s!=this.index+1){this.shadow=new Image;this.wrapper.appendChild(this.shadow);this.shadow.src=i.options.assets.left;this.left(this.shadow)}this.s.zIndex=String(100+this.index);this.s.right="50%";this.left(this.image);this.left(this.overlay)}if(typeof this.htmlContent!=="undefined"){this.htmlContainer=document.createElement("div");jQuery(this.htmlContainer).addClass("flipbook-page-htmlContainer");this.wrapper.appendChild(this.htmlContainer);this.index%2==0?this.right(this.htmlContainer):this.left(this.htmlContainer)}this.image.style[this.book.transform]="translateZ(0)";this.overlay.style[this.book.transform]="translateZ(0)";this.overlay.style["pointer-events"]="none";if(this.shadow){this.shadow.style[this.book.transform]="translateZ(0)";this.shadow.style["pointer-events"]="none"}if(this.book.flipType=="3d"){this.wrapper.style[this.book.transformOrigin]=this.index%2!=0?"100% 50%":"0% 50%"}if(e.links){var o=this;for(var u=0;u<e.links.length;u++){var a=e.links[u];function f(e){var t=document.createElement("div");o.wrapper.appendChild(t);t.classList.add("flipbook-page-link");t.style.position="absolute";t.style.left=String(e.x)+"px";t.style.top=String(e.y)+"px";t.style.width=String(e.width)+"px";t.style.height=String(e.height)+"px";t.style.backgroundColor=e.color;t.style.opacity=e.alpha;t.style.cursor="pointer";jQuery(t).click(function(t){if(Number(e.page)>0){i.goToPage(Number(e.page))}else if(String(e.url)!=""){window.open(e.url)}}).mouseenter(function(){t.style.backgroundColor=e.hoverColor;t.style.opacity=e.hoverAlpha}).mouseleave(function(){t.style.backgroundColor=e.color;t.style.opacity=e.alpha})}f(a)}}var l=this.index*1+1;jQuery(this.wrapper).addClass("pn"+l)};FLIPBOOK.Page.prototype={loadPage:function(){if(this.loaded==true)return;this.loaded=true;var e=this;e.imageLoader.src=this.imageSrc;jQuery(e.imageLoader).load(function(){e.image.src=e.imageSrc});if(typeof this.htmlContent!=="undefined"){this.htmlContainer.innerHTML=this.htmlContent}},flipView:function(){},expand:function(){if(!this.expanded)this.s.width=String(this.width)+"px";this.expanded=true},contract:function(){if(this.expanded)this.s.width="0px";this.expanded=false},show:function(){if(this.hidden){this.s.display="block"}this.hidden=false},hide:function(){if(!this.hidden){this.s.display="none"}this.hidden=true},hideVisibility:function(){if(!this.invisible)this.s.visibility="hidden";this.invisible=true},left:function(e){var t=e.style;t.width=String(this.width)+"px";t.height=String(this.height)+"px";t.position="absolute";t.top="0px";t.right="0px"},right:function(e){var t=e.style;t.width=String(this.width)+"px";t.height=String(this.height)+"px";t.position="absolute";t.top="0px";t.left="0px"}};FLIPBOOK.Time=function(e,t,n,r,i,s){var o=$("#ImgContainerDiv");var u=o.find(".pageImg"+(r+1));var a=e.src;if(e.src=="")a=u.attr("src");if(a){this.twrapper=document.createElement("div");jQuery(this.twrapper).addClass("item");this.s=this.twrapper.style;this.index=r;var f=$(".created_dates .created_date"+r).html();var l=f;jQuery(this.twrapper).addClass("tn"+r);jQuery(this.twrapper).attr("data-id",l);this.invisible=false;this.image=new Image;this.image.src=a;this.twrapper.appendChild(this.image);this.readMore=$(document.createElement("div")).addClass("read_more").attr("data-id",l).appendTo(this.twrapper).html("More");this.tLoader=document.createElement("div");jQuery(this.tLoader).addClass("item_open");jQuery(this.tLoader).attr("data-id",l);var c=$(document.createElement("img"));c.attr("src",a);c.attr("originalSrc",e.originalSrc);$(this.tLoader).append(c)}else{return false}};FLIPBOOK.Time.prototype={};FLIPBOOK.Slide=function(e,t,n,r,i,s){this.wrapper=document.createElement("div");jQuery(this.wrapper).addClass("flipbook-page");this.s=this.wrapper.style;this.s.width=String(t)+"px";this.s.height=String(n)+"px";this.index=r;this.book=i;this.width=t;this.height=n;this.invisible=false;this.image=new Image;this.image.src=i.options.assets.preloader;this.image.className="thisLoader";this.imageSrc=e.src;this.wrapper.appendChild(this.image);this.imageLoader=new Image;this.overlay=new Image;this.overlay.src=i.options.assets.overlay;this.wrapper.appendChild(this.overlay);this.overlay.style.opacity="0";this.expanded=true;this.htmlContent=e.htmlContent;if(this.index%2==12340){this.s.zIndex=String(100-this.index);this.s.left="50%";this.right(this.image);this.right(this.overlay)}else{if(s!=this.index+1){this.shadow=new Image;this.wrapper.appendChild(this.shadow)}this.s.zIndex=String(100+this.index);this.s.left="0%";this.left(this.image);this.left(this.overlay)}if(typeof this.htmlContent!=="undefined"){this.htmlContainer=document.createElement("div");jQuery(this.htmlContainer).addClass("flipbook-page-htmlContainer");this.wrapper.appendChild(this.htmlContainer);this.index%2==0?this.right(this.htmlContainer):this.left(this.htmlContainer)}this.image.style[this.book.transform]="translateZ(0)";this.overlay.style[this.book.transform]="translateZ(0)";this.overlay.style["pointer-events"]="none";if(this.shadow){this.shadow.style[this.book.transform]="translateZ(0)";this.shadow.style["pointer-events"]="none"}this.s.top="0px";if(this.book.flipType=="3d"){this.wrapper.style[this.book.transformOrigin]=this.index%2!=0?"100% 50%":"0% 50%"}if(e.links){var o=this;for(var u=0;u<e.links.length;u++){var a=e.links[u];function f(e){var t=document.createElement("div");o.wrapper.appendChild(t);t.classList.add("flipbook-page-link");t.style.position="absolute";t.style.left=String(e.x)+"px";t.style.top=String(e.y)+"px";t.style.width=String(e.width)+"px";t.style.height=String(e.height)+"px";t.style.backgroundColor=e.color;t.style.opacity=e.alpha;t.style.cursor="pointer";jQuery(t).click(function(t){if(Number(e.page)>0){i.goToPage(Number(e.page))}else if(String(e.url)!=""){window.open(e.url)}}).mouseenter(function(){t.style.backgroundColor=e.hoverColor;t.style.opacity=e.hoverAlpha}).mouseleave(function(){t.style.backgroundColor=e.color;t.style.opacity=e.alpha})}f(a)}}var l=this.index*1+1;jQuery(this.wrapper).addClass("pn"+l)};FLIPBOOK.Slide.prototype={loadPage:function(){if(this.loaded==true)return;this.loaded=true;var e=this;e.imageLoader.src=this.imageSrc;jQuery(e.imageLoader).load(function(){e.image.src=e.imageSrc});if(typeof this.htmlContent!=="undefined"){this.htmlContainer.innerHTML=this.htmlContent}},flipView:function(){},expand:function(){if(!this.expanded)this.s.width=String(this.width)+"px";this.expanded=true},contract:function(){if(this.expanded)this.s.width="0px";this.expanded=false},show:function(){if(this.hidden){this.s.display="block"}this.hidden=false},hide:function(){if(!this.hidden){this.s.display="none"}this.hidden=true},hideVisibility:function(){if(!this.invisible)this.s.visibility="hidden";this.invisible=true},left:function(e){var t=e.style;t.width=String(this.width)+"px";t.height=String(this.height)+"px";t.position="absolute";t.top="0px";t.right="0px"},right:function(e){var t=e.style;t.width=String(this.width)+"px";t.height=String(this.height)+"px";t.position="absolute";t.top="0px";t.left="0px"}};FLIPBOOK.top10Page=function(e,t,n,r,i){this.wrapper=document.createElement("div");jQuery(this.wrapper).addClass("flipbook-page");this.s=this.wrapper.style;this.s.width=String(t)+"px";this.s.height=String(n)+"px";this.index=r;this.book=i;this.width=t;this.height=n;this.invisible=false;this.image=new Image;this.image.src=i.options.assets.preloader;this.imageSrc=e.src;this.wrapper.appendChild(this.image);this.imageLoader=new Image;this.overlay=new Image;this.overlay.src=i.options.assets.overlay;this.wrapper.appendChild(this.overlay);this.overlay.style.opacity="0";this.expanded=true;this.htmlContent=e.htmlContent;if(this.index%2==0){this.s.zIndex=String(100-this.index);this.s.left="50%";this.right(this.image);this.right(this.overlay)}else{this.shadow=new Image;this.wrapper.appendChild(this.shadow);this.shadow.src=i.options.assets.left;this.left(this.shadow);this.s.zIndex=String(100+this.index);this.s.right="50%";this.left(this.image);this.left(this.overlay)}if(typeof this.htmlContent!=="undefined"){this.htmlContainer=document.createElement("div");jQuery(this.htmlContainer).addClass("flipbook-page-htmlContainer");this.wrapper.appendChild(this.htmlContainer);this.index%2==0?this.right(this.htmlContainer):this.left(this.htmlContainer)}this.image.style[this.book.transform]="translateZ(0)";this.overlay.style[this.book.transform]="translateZ(0)";this.overlay.style["pointer-events"]="none";if(this.shadow){this.shadow.style[this.book.transform]="translateZ(0)";this.shadow.style["pointer-events"]="none"}this.s.top="0px";if(this.book.flipType=="3d"){this.wrapper.style[this.book.transformOrigin]=this.index%2!=0?"100% 50%":"0% 50%"}if(e.links){var s=this;for(var o=0;o<e.links.length;o++){var u=e.links[o];function a(e){var t=document.createElement("div");s.wrapper.appendChild(t);t.classList.add("flipbook-page-link");t.style.position="absolute";t.style.left=String(e.x)+"px";t.style.top=String(e.y)+"px";t.style.width=String(e.width)+"px";t.style.height=String(e.height)+"px";t.style.backgroundColor=e.color;t.style.opacity=e.alpha;t.style.cursor="pointer";jQuery(t).click(function(t){if(Number(e.page)>0){i.goToPage(Number(e.page))}else if(String(e.url)!=""){window.open(e.url)}}).mouseenter(function(){t.style.backgroundColor=e.hoverColor;t.style.opacity=e.hoverAlpha}).mouseleave(function(){t.style.backgroundColor=e.color;t.style.opacity=e.alpha})}a(u)}}};FLIPBOOK.top10Page.prototype={loadPage:function(){if(this.loaded==true)return;this.loaded=true;var e=this;e.imageLoader.src=this.imageSrc;jQuery(e.imageLoader).load(function(){e.image.src=e.imageSrc});if(typeof this.htmlContent!=="undefined"){this.htmlContainer.innerHTML=this.htmlContent}},flipView:function(){},expand:function(){if(!this.expanded)this.s.width=String(this.width)+"px";this.expanded=true},contract:function(){if(this.expanded)this.s.width="0px";this.expanded=false},show:function(){if(this.hidden){this.s.display="block"}this.hidden=false},hide:function(){if(!this.hidden){this.s.display="none"}this.hidden=true},hideVisibility:function(){if(!this.invisible)this.s.visibility="hidden";this.invisible=true},left:function(e){var t=e.style;t.width=String(this.width)+"px";t.height=String(this.height)+"px";t.position="absolute";t.top="0px";t.right="0px"},right:function(e){var t=e.style;t.width=String(this.width)+"px";t.height=String(this.height)+"px";t.position="absolute";t.top="0px";t.left="0px"}};FLIPBOOK.Thumb=function(e,t,n,r,i,s){this.image=new Image;this.image.src=t.options.assets.preloader;this.image.style.width=String(r)+"px";this.image.style.height=String(i)+"px";this.imageSrc=n;this.index=s;this.image.style.position="absolute";this.image.style.userSelect="none";this.image.style.margin="0px";this.image.style.padding="2px";this.image.style.webkitUserSelect="none";this.image.style.MozUserSelect="none";this.image.setAttribute("unselectable","on");this.width=r;this.height=i;this.$=e;this.preloader=new Image};FLIPBOOK.Thumb.prototype={loadImage:function(){var e=this;this.preloader.src=this.imageSrc;this.$(this.preloader).load(function(){e.image.src=e.imageSrc})}};Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return false}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");e.id="webgl-error-message";e.style.fontFamily="monospace";e.style.fontSize="13px";e.style.fontWeight="normal";e.style.textAlign="center";e.style.background="#fff";e.style.color="#000";e.style.padding="1.5em";e.style.width="400px";e.style.margin="5em auto 0";if(!this.webgl){e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")}return e},addGetWebGLMessage:function(e){var t,n,r;e=e||{};t=e.parent!==undefined?e.parent:document.body;n=e.id!==undefined?e.id:"oldie";r=Detector.getWebGLErrorMessage();r.id=n;t.appendChild(r)}};(function(e,t){function A(e){if(i==="")return e;e=e.charAt(0).toUpperCase()+e.substr(1);return i+e}var n=Math,r=t.createElement("div").style,i=function(){var e="t,webkitT,MozT,msT,OT".split(","),t,n=0,i=e.length;for(;n<i;n++){t=e[n]+"ransform";if(t in r){return e[n].substr(0,e[n].length-1)}}return false}(),s=i?"-"+i.toLowerCase()+"-":"",o=A("transform"),u=A("transitionProperty"),a=A("transitionDuration"),f=A("transformOrigin"),l=A("transitionTimingFunction"),c=A("transitionDelay"),h=/android/gi.test(navigator.appVersion),p=/iphone|ipad/gi.test(navigator.appVersion),d=/hp-tablet/gi.test(navigator.appVersion),v=A("perspective")in r,m="ontouchstart"in e&&!d,g=i!==false,y=A("transition")in r,b="onorientationchange"in e?"orientationchange":"resize",w=m?"touchstart":"mousedown",E=m?"touchmove":"mousemove",S=m?"touchend":"mouseup",x=m?"touchcancel":"mouseup",T=function(){if(i===false)return false;var e={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return e[i]}(),N=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),C=function(){return e.cancelRequestAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}(),k=v?" translateZ(0)":"",L=function(n,r){var i=this,c;i.wrapper=typeof n=="object"?n:t.getElementById(n);i.wrapper.style.overflow="hidden";i.scroller=i.wrapper.children[0];i.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:h,hideScrollbar:p,fadeScrollbar:p&&v,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null,keepInCenterH:false,keepInCenterV:false};for(c in r)i.options[c]=r[c];i.x=i.options.x;i.y=i.options.y;i.options.useTransform=g&&i.options.useTransform;i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar;i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar;i.options.zoom=i.options.useTransform&&i.options.zoom;i.options.useTransition=y&&i.options.useTransition;i.keepInCenterH=i.options.keepInCenterH;i.keepInCenterV=i.options.keepInCenterV;if(i.options.zoom&&h){k=""}i.scroller.style[u]=i.options.useTransform?s+"transform":"top left";i.scroller.style[a]="0";i.scroller.style[f]="0 0";if(i.options.useTransition)i.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)";if(i.options.useTransform)i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px)"+k;else i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px";if(i.options.useTransition)i.options.fixedScrollbar=true;i.refresh();i._bind(b,e);i._bind(w);if(!m){if(i.options.wheelAction!="none"){i._bind("DOMMouseScroll");i._bind("mousewheel")}}if(i.options.checkDOMChanges)i.checkDOMTime=setInterval(function(){i._checkDOMChanges()},500)};L.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case w:if(!m&&e.button!==0)return;t._start(e);break;case E:t._move(e);break;case S:case x:t._end(e);break;case b:t._resize();break;case"DOMMouseScroll":case"mousewheel":t._wheel(e);break;case T:t._transitionEnd(e);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(e){var r=this,i;if(!r[e+"Scrollbar"]){if(r[e+"ScrollbarWrapper"]){if(g)r[e+"ScrollbarIndicator"].style[o]="";r[e+"ScrollbarWrapper"].parentNode.removeChild(r[e+"ScrollbarWrapper"]);r[e+"ScrollbarWrapper"]=null;r[e+"ScrollbarIndicator"]=null}return}if(!r[e+"ScrollbarWrapper"]){i=t.createElement("div");if(r.options.scrollbarClass)i.className=r.options.scrollbarClass+e.toUpperCase();else i.style.cssText="position:absolute;z-index:100;"+(e=="h"?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px");i.style.cssText+=";pointer-events:none;"+s+"transition-property:opacity;"+s+"transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1");r.wrapper.appendChild(i);r[e+"ScrollbarWrapper"]=i;i=t.createElement("div");if(!r.options.scrollbarClass){i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+s+"background-clip:padding-box;"+s+"box-sizing:border-box;"+(e=="h"?"height:100%":"width:100%")+";"+s+"border-radius:3px;border-radius:3px"}i.style.cssText+=";pointer-events:none;"+s+"transition-property:"+s+"transform;"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+s+"transition-duration:0;"+s+"transform: translate(0,0)"+k;if(r.options.useTransition)i.style.cssText+=";"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";r[e+"ScrollbarWrapper"].appendChild(i);r[e+"ScrollbarIndicator"]=i}if(e=="h"){r.hScrollbarSize=r.hScrollbarWrapper.clientWidth;r.hScrollbarIndicatorSize=n.max(n.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8);r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px";r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize;r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX}else{r.vScrollbarSize=r.vScrollbarWrapper.clientHeight;r.vScrollbarIndicatorSize=n.max(n.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8);r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px";r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize;r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY}r._scrollbarPos(e,true)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},h?200:0)},_pos:function(e,t){if(this.zoomed)return;if(this.scrollerW<this.wrapperW&&this.keepInCenterH){e=(this.wrapperW-this.scrollerW)/2;this.moved=false}if(this.scrollerH<this.wrapperH&&this.keepInCenterV){t=(this.wrapperH-this.scrollerH)/2;this.moved=false}e=n.round(e);t=n.round(t);if(this.options.useTransform){this.scroller.style[o]="translate("+e+"px,"+t+"px) scale("+this.scale+")"+k}else{this.scroller.style.left=e+"px";this.scroller.style.top=t+"px"}this.x=e;this.y=t;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(e,t){var r=this,i=e=="h"?r.x:r.y,s;if(!r[e+"Scrollbar"])return;i=r[e+"ScrollbarProp"]*i;if(i<0){if(!r.options.fixedScrollbar){s=r[e+"ScrollbarIndicatorSize"]+n.round(i*3);if(s<8)s=8;r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px"}i=0}else if(i>r[e+"ScrollbarMaxScroll"]){if(!r.options.fixedScrollbar){s=r[e+"ScrollbarIndicatorSize"]-n.round((i-r[e+"ScrollbarMaxScroll"])*3);if(s<8)s=8;r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px";i=r[e+"ScrollbarMaxScroll"]+(r[e+"ScrollbarIndicatorSize"]-s)}else{i=r[e+"ScrollbarMaxScroll"]}}r[e+"ScrollbarWrapper"].style[c]="0";r[e+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1";r[e+"ScrollbarIndicator"].style[o]="translate("+(e=="h"?i+"px,0)":"0,"+i+"px)")+k},_start:function(t){var r=this,i=m?t.touches[0]:t,s,u,a,f,l;if(!r.enabled)return;if(r.options.onBeforeScrollStart)r.options.onBeforeScrollStart.call(r,t);if(r.options.useTransition||r.options.zoom)r._transitionTime(0);r.moved=false;r.animating=false;r.zoomed=false;r.distX=0;r.distY=0;r.absDistX=0;r.absDistY=0;r.dirX=0;r.dirY=0;if(r.options.zoom&&m&&t.touches.length>1){f=n.abs(t.touches[0].pageX-t.touches[1].pageX);l=n.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDistStart=n.sqrt(f*f+l*l);r.originX=n.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x;r.originY=n.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y;if(r.options.onZoomStart)r.options.onZoomStart.call(r,t)}if(r.options.momentum){if(r.options.useTransform){s=getComputedStyle(r.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(",");u=+(s[12]||s[4]);a=+(s[13]||s[5])}else{u=+getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,"");a=+getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")}if(u!=r.x||a!=r.y){if(r.options.useTransition)r._unbind(T);else C(r.aniTime);r.steps=[];r._pos(u,a);if(r.options.onScrollEnd)r.options.onScrollEnd.call(r)}}r.absStartX=r.x;r.absStartY=r.y;r.startX=r.x;r.startY=r.y;r.pointX=i.pageX;r.pointY=i.pageY;r.startTime=t.timeStamp||Date.now();if(r.options.onScrollStart)r.options.onScrollStart.call(r,t);r._bind(E,e);r._bind(S,e);r._bind(x,e)},_move:function(e){var t=this,r=m?e.touches[0]:e,i=r.pageX-t.pointX,s=r.pageY-t.pointY,u=t.x+i,a=t.y+s,f,l,c,h=e.timeStamp||Date.now();if(t.options.onBeforeScrollMove)t.options.onBeforeScrollMove.call(t,e);if(t.options.zoom&&m&&e.touches.length>1){f=n.abs(e.touches[0].pageX-e.touches[1].pageX);l=n.abs(e.touches[0].pageY-e.touches[1].pageY);t.touchesDist=n.sqrt(f*f+l*l);t.zoomed=true;c=1/t.touchesDistStart*t.touchesDist*this.scale;if(c<t.options.zoomMin)c=.5*t.options.zoomMin*Math.pow(2,c/t.options.zoomMin);else if(c>t.options.zoomMax)c=2*t.options.zoomMax*Math.pow(.5,t.options.zoomMax/c);t.lastScale=c/this.scale;u=this.originX-this.originX*t.lastScale+this.x,a=this.originY-this.originY*t.lastScale+this.y;this.scroller.style[o]="translate("+u+"px,"+a+"px) scale("+c+")"+k;if(t.options.onZoom)t.options.onZoom.call(t,e);return}t.pointX=r.pageX;t.pointY=r.pageY;if(u>0||u<t.maxScrollX){u=t.options.bounce?t.x+i/2:u>=0||t.maxScrollX>=0?0:t.maxScrollX}if(a>t.minScrollY||a<t.maxScrollY){a=t.options.bounce?t.y+s/2:a>=t.minScrollY||t.maxScrollY>=0?t.minScrollY:t.maxScrollY}t.distX+=i;t.distY+=s;t.absDistX=n.abs(t.distX);t.absDistY=n.abs(t.distY);if(t.absDistX<6&&t.absDistY<6){return}if(t.options.lockDirection){if(t.absDistX>t.absDistY+5){a=t.y;s=0}else if(t.absDistY>t.absDistX+5){u=t.x;i=0}}t.moved=true;t._pos(u,a);t.dirX=i>0?-1:i<0?1:0;t.dirY=s>0?-1:s<0?1:0;if(h-t.startTime>300){t.startTime=h;t.startX=t.x;t.startY=t.y}if(t.options.onScrollMove)t.options.onScrollMove.call(t,e)},_end:function(r){if(m&&r.touches.length!==0)return;var i=this,s=m?r.changedTouches[0]:r,u,f,l={dist:0,time:0},c={dist:0,time:0},h=(r.timeStamp||Date.now())-i.startTime,p=i.x,d=i.y,v,g,y,b,w;i._unbind(E,e);i._unbind(S,e);i._unbind(x,e);if(i.options.onBeforeScrollEnd)i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){w=i.scale*i.lastScale;w=Math.max(i.options.zoomMin,w);w=Math.min(i.options.zoomMax,w);i.lastScale=w/i.scale;i.scale=w;i.x=i.originX-i.originX*i.lastScale+i.x;i.y=i.originY-i.originY*i.lastScale+i.y;i.scroller.style[a]="200ms";i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+i.scale+")"+k;i.zoomed=false;i.refresh();if(i.options.onZoomEnd)i.options.onZoomEnd.call(i,r,w);return}if(!i.moved){if(true){if(i.doubleTapTimer&&i.options.zoom){clearTimeout(i.doubleTapTimer);i.doubleTapTimer=null;if(i.options.onZoomStart)i.options.onZoomStart.call(i,r);if(i.options.onZoomEnd){setTimeout(function(){i.options.onZoomEnd.call(i,r,w)},200)}}else if(this.options.handleClick){i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null;u=s.target;while(u.nodeType!=1)u=u.parentNode;if(u.tagName!="SELECT"&&u.tagName!="INPUT"&&u.tagName!="TEXTAREA"){f=t.createEvent("MouseEvents");f.initMouseEvent("click",true,true,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);f._fake=true;u.dispatchEvent(f)}if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r)},i.options.zoom?250:0)}}i._resetPos(400);return}if(h<300&&i.options.momentum){l=p?i._momentum(p-i.startX,h,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):l;c=d?i._momentum(d-i.startY,h,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):c;p=i.x+l.dist;d=i.y+c.dist;if(i.x>0&&p>0||i.x<i.maxScrollX&&p<i.maxScrollX)l={dist:0,time:0};if(i.y>i.minScrollY&&d>i.minScrollY||i.y<i.maxScrollY&&d<i.maxScrollY)c={dist:0,time:0}}if(l.dist||c.dist){y=n.max(n.max(l.time,c.time),10);if(i.options.snap){v=p-i.absStartX;g=d-i.absStartY;if(n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold){i.scrollTo(i.absStartX,i.absStartY,200)}else{b=i._snap(p,d);p=b.x;d=b.y;y=n.max(b.time,y)}}i.scrollTo(n.round(p),n.round(d),y);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r);return}if(i.options.snap){v=p-i.absStartX;g=d-i.absStartY;if(n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{b=i._snap(i.x,i.y);if(b.x!=i.x||b.y!=i.y)i.scrollTo(b.x,b.y,b.time)}if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r);return}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this;if(t.keepInCenterH&&t.scrollerW<t.wrapperW){resetX=t.x>=0?(t.wrapperW-t.scrollerW)/2:t.x<t.maxScrollX?t.maxScrollX:t.x}else resetX=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x;if(t.keepInCenterV&&t.scrollerH<t.wrapperH){resetY=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;resetY=t.y>0?(t.wrapperH-t.scrollerH)/2:resetY}else resetY=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(resetX==t.x&&resetY==t.y){if(t.moved){t.moved=false;if(t.options.onScrollEnd)t.options.onScrollEnd.call(t)}if(t.hScrollbar&&t.options.hideScrollbar){if(i=="webkit")t.hScrollbarWrapper.style[c]="300ms";t.hScrollbarWrapper.style.opacity="0"}if(t.vScrollbar&&t.options.hideScrollbar){if(i=="webkit")t.vScrollbarWrapper.style[c]="300ms";t.vScrollbarWrapper.style.opacity="0"}return}t.scrollTo(resetX,resetY,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e){n=e.wheelDeltaX/12;r=e.wheelDeltaY/12}else if("wheelDelta"in e){n=r=e.wheelDelta/12}else if("detail"in e){n=r=-e.detail*3}else{return}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0));if(o<t.options.zoomMin)o=t.options.zoomMin;if(o>t.options.zoomMax)o=t.options.zoomMax;if(o!=t.scale){if(!t.wheelZoomCount&&t.options.onZoomStart)t.options.onZoomStart.call(t,e);t.wheelZoomCount++;t.zoom(e.pageX,e.pageY,o,400);setTimeout(function(){t.wheelZoomCount--;if(!t.wheelZoomCount&&t.options.onZoomEnd)t.options.onZoomEnd.call(t,e,t.scale)},400)}return}i=t.x+n;s=t.y+r;if(i>0)i=0;else if(i<t.maxScrollX)i=t.maxScrollX;if(s>t.minScrollY)s=t.minScrollY;else if(s<t.maxScrollY)s=t.maxScrollY;if(t.maxScrollY<0){t.scrollTo(i,s,0)}},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind(T);t._startAni()},_startAni:function(){var e=this,t=e.x,r=e.y,i=Date.now(),s,o,u;if(e.animating)return;if(!e.steps.length){e._resetPos(400);return}s=e.steps.shift();if(s.x==t&&s.y==r)s.time=0;e.animating=true;e.moved=true;if(e.options.useTransition){e._transitionTime(s.time);e._pos(s.x,s.y);e.animating=false;if(s.time)e._bind(T);else e._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){e._pos(s.x,s.y);e.animating=false;if(e.options.onAnimationEnd)e.options.onAnimationEnd.call(e);e._startAni();return}a=(a-i)/s.time-1;o=n.sqrt(1-a*a);f=(s.x-t)*o+t;l=(s.y-r)*o+r;e._pos(f,l);if(e.animating)e.aniTime=N(u)};u()},_transitionTime:function(e){e+="ms";this.scroller.style[a]=e;if(this.hScrollbar)this.hScrollbarIndicator.style[a]=e;if(this.vScrollbar)this.vScrollbarIndicator.style[a]=e},_momentum:function(e,t,r,i,s){var o=6e-4,u=n.abs(e)/t,a=u*u/(2*o),f=0,l=0;if(e>0&&a>r){l=s/(6/(a/u*o));r=r+l;u=u*r/a;a=r}else if(e<0&&a>i){l=s/(6/(a/u*o));i=i+l;u=u*i/a;a=i}a=a*(e<0?-1:1);f=u/o;return{dist:a,time:n.round(f)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}if(e!=this.wrapper){t*=this.scale;n*=this.scale}return{left:t,top:n}},_snap:function(e,t){var r=this,i,s,o,u,a,f;o=r.pagesX.length-1;s=r.pagesX.length;for(i=0;i<s;i++){if(e>=r.pagesX[i]){o=i;break}}if(o==r.currPageX&&o>0&&r.dirX<0)o--;e=r.pagesX[o];a=n.abs(e-r.pagesX[r.currPageX]);a=a?n.abs(r.x-e)/a*500:0;r.currPageX=o;o=r.pagesY.length-1;for(i=0;i<o;i++){if(t>=r.pagesY[i]){o=i;break}}if(o==r.currPageY&&o>0&&r.dirY<0)o--;t=r.pagesY[o];f=n.abs(t-r.pagesY[r.currPageY]);f=f?n.abs(r.y-t)/f*500:0;r.currPageY=o;u=n.round(n.max(a,f))||200;return{x:e,y:t,time:u}},_bind:function(e,t,n){if(this.scroller.addEventListener)(t||this.scroller).addEventListener(e,this,!!n);else(t||this.scroller).attachEvent(e,this,!!n)},_unbind:function(e,t,n){if(this.scroller.removeEventListener)(t||this.scroller).removeEventListener(e,this,!!n);else(t||this.scroller).detachEvent(e,this,!!n)},destroy:function(){var t=this;t.scroller.style[o]="";t.hScrollbar=false;t.vScrollbar=false;t._scrollbar("h");t._scrollbar("v");t._unbind(b,e);t._unbind(w);t._unbind(E,e);t._unbind(S,e);t._unbind(x,e);if(!t.options.hasTouch){t._unbind("DOMMouseScroll");t._unbind("mousewheel")}if(t.options.useTransition)t._unbind(T);if(t.options.checkDOMChanges)clearInterval(t.checkDOMTime);if(t.options.onDestroy)t.options.onDestroy.call(t)},refresh:function(){var e=this,t,r,i,s,o=0,u=0;if(e.scale<e.options.zoomMin)e.scale=e.options.zoomMin;e.wrapperW=e.wrapper.clientWidth||1;e.wrapperH=e.wrapper.clientHeight||1;e.minScrollY=-e.options.topOffset||0;e.scrollerW=n.round(e.scroller.offsetWidth*e.scale);e.scrollerH=n.round((e.scroller.offsetHeight+e.minScrollY)*e.scale);e.maxScrollX=e.wrapperW-e.scrollerW;e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY;e.dirX=0;e.dirY=0;if(e.options.onRefresh)e.options.onRefresh.call(e);e.hScroll=e.options.hScroll&&e.maxScrollX<0;e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH);e.hScrollbar=e.hScroll&&e.options.hScrollbar;e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH;t=e._offset(e.wrapper);e.wrapperOffsetLeft=-t.left;e.wrapperOffsetTop=-t.top;if(typeof e.options.snap=="string"){e.pagesX=[];e.pagesY=[];s=e.scroller.querySelectorAll(e.options.snap);i=s.length;for(r=0;r<i;r++){o=e._offset(s[r]);o.left+=e.wrapperOffsetLeft;o.top+=e.wrapperOffsetTop;e.pagesX[r]=o.left<e.maxScrollX?e.maxScrollX:o.left*e.scale;e.pagesY[r]=o.top<e.maxScrollY?e.maxScrollY:o.top*e.scale}}else if(e.options.snap){e.pagesX=[];while(o>=e.maxScrollX){e.pagesX[u]=o;o=o-e.wrapperW;u++}if(e.maxScrollX%e.wrapperW)e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1];o=0;u=0;e.pagesY=[];while(o>=e.maxScrollY){e.pagesY[u]=o;o=o-e.wrapperH;u++}if(e.maxScrollY%e.wrapperH)e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1]}e._scrollbar("h");e._scrollbar("v");if(!e.zoomed){e.scroller.style[a]="0";e._resetPos(400)}},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop();if(!s.length)s=[{x:e,y:t,time:n,relative:r}];u=s.length;for(o=0;o<u;o++){if(s[o].relative){s[o].x=i.x-s[o].x;s[o].y=i.y-s[o].y}i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0})}i._startAni()},scrollToElement:function(e,t){var r=this,i;e=e.nodeType?e:r.scroller.querySelector(e);if(!e)return;i=r._offset(e);i.left+=r.wrapperOffsetLeft;i.top+=r.wrapperOffsetTop;i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left;i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top;t=t===undefined?n.max(n.abs(i.left)*2,n.abs(i.top)*2):t;r.scrollTo(i.left,i.top,t)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n;if(r.options.onScrollStart)r.options.onScrollStart.call(r);if(r.options.snap){e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e;t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t;e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e;t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t;r.currPageX=e;r.currPageY=t;i=r.pagesX[e];s=r.pagesY[t]}else{i=-r.wrapperW*e;s=-r.wrapperH*t;if(i<r.maxScrollX)i=r.maxScrollX;if(s<r.maxScrollY)s=r.maxScrollY}r.scrollTo(i,s,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(E,e);this._unbind(S,e);this._unbind(x,e)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind(T);else C(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(e,t,n,r){var i=this,s=n/i.scale;if(!i.options.useTransform)return;i.zoomed=true;r=r===undefined?200:r;e=e-i.wrapperOffsetLeft-i.x;t=t-i.wrapperOffsetTop-i.y;i.x=e-e*s+i.x;i.y=t-t*s+i.y;i.scale=n;i.refresh();i.x=i.x>0?0:i.x<i.maxScrollX?i.maxScrollX:i.x;i.y=i.y>i.minScrollY?i.minScrollY:i.y<i.maxScrollY?i.maxScrollY:i.y;if(i.keepInCenterH){if(i.scrollerW<i.wrapperW){i.x=(i.wrapperW-i.scrollerW)/2}}if(i.keepInCenterV){if(i.scrollerH<i.wrapperH){i.y=(i.wrapperH-i.scrollerH)/2}}i.scroller.style[a]=r+"ms";i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+n+")"+k;i.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating},setX:function(e){this.x=e}};r=null;if(typeof exports!=="undefined")exports.iScroll=L;else e.iScroll=L})(window,document);var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.Lightbox=function(e,t,n){var r=this;this.context=e;this.options=n;var i=e.elem.nodeName.toLowerCase()==="img"?e.$elem:e.$elem.find("img");i.css("cursor","pointer").bind(e.START_EV,function(){r.openLightbox()});r.overlay=jQuery(document.createElement("div")).attr("class","flipbook-overlay").css("visibility","hidden").css("z-index","999999").bind(e.START_EV,function(e){if(jQuery(e.target).hasClass("flipbook-overlay")){r.closeLightbox()}}).appendTo("body");r.wrapper=jQuery(document.createElement("div")).css("width",r.options.lightboxWidth).css("height","auto").appendTo(r.overlay);if(r.options.lightboxTransparent==true){r.wrapper.attr("class","flipbook-wrapper-transparent").css("margin","0px auto").css("padding","0px").css("height","100%").css("width","100%")}else{r.wrapper.attr("class","flipbook-wrapper").css("margin",String(r.options.lightboxMargin)+"px auto").css("padding",String(r.options.lightboxPadding)+"px");t.css("margin",String(r.options.lightboxPadding)+"px")}t.appendTo(r.wrapper);jQuery(document.createElement("span")).attr("aria-hidden","true").appendTo(r.wrapper).addClass("icon-cross").addClass("icon-general").addClass("skin-color").css("right","0").css("top","0").css("position","absolute").css("cursor","pointer").bind(r.context.START_EV,function(e){r.closeLightbox()});r.resize();jQuery(window).resize(function(){r.resize()});r.resize()};FLIPBOOK.Lightbox.prototype={openLightbox:function(){var e=this;this.overlay.css("visibility","visible");this.overlay.css("display","none");this.wrapper.css("display","none");this.overlay.fadeIn("fast",function(){e.wrapper.css("display","block");e.context.lightboxStart()});jQuery("body").css("overflow","hidden");e.context.lightboxStart()},closeLightbox:function(){var e=this;this.overlay.fadeOut("fast");jQuery("body").css("overflow","auto");e.context.lightboxEnd()},resize:function(){var e=this;var t=jQuery(window),n=t.width(),r=t.height();if(e.options.lightboxTransparent==true){e.wrapper.css("width","100%")}else{e.wrapper.css("width",e.options.lightboxWidth);if(e.wrapper.width()+2*e.options.lightboxMargin+2*e.options.lightboxPadding<e.options.lightboxMinWidth){e.wrapper.css("width",String(n-2*e.options.lightboxMargin-2*e.options.lightboxPadding)+"px")}}}};var THREEx=THREEx||{};THREEx.FullScreen=THREEx.FullScreen||{};THREEx.FullScreen.available=function(){return this._hasWebkitFullScreen||this._hasMozFullScreen};THREEx.FullScreen.activated=function(){if(this._hasWebkitFullScreen){return document.webkitIsFullScreen}else if(this._hasMozFullScreen){return document.mozFullScreen}else{console.assert(false)}};THREEx.FullScreen.request=function(e){e=e||document.body;if(this._hasWebkitFullScreen){e.webkitRequestFullScreen()}else if(this._hasMozFullScreen){e.mozRequestFullScreen()}else{console.assert(false)}};THREEx.FullScreen.cancel=function(){if(this._hasWebkitFullScreen){document.webkitCancelFullScreen()}else if(this._hasMozFullScreen){document.mozCancelFullScreen()}else{console.assert(false)}};THREEx.FullScreen._hasWebkitFullScreen="webkitCancelFullScreen"in document?true:false;THREEx.FullScreen._hasMozFullScreen="mozCancelFullScreen"in document?true:false