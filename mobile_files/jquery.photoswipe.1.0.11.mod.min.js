(function(window){if(!Function.prototype.bind){Function.prototype.bind=function(e){var t=[].slice,n=t.call(arguments,1),r=this,i=function(){},s=function(){return r.apply(this instanceof i?this:e||{},n.concat(t.call(arguments)))};i.prototype=r.prototype;s.prototype=new i;return s}}if(typeof Code==="undefined"){Code={};Code.PhotoSwipe={}}Code.PhotoSwipe.Util={browser:{version:(navigator.userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],webkit:/webkit/i.test(navigator.userAgent),opera:/opera/i.test(navigator.userAgent),msie:/msie/i.test(navigator.userAgent)&&!/opera/.test(navigator.userAgent),mozilla:/mozilla/i.test(navigator.userAgent)&&!/(compatible|webkit)/.test(navigator.userAgent),mobileSafari:/mobile.*safari/i.test(navigator.userAgent),is3dSupported:false,isAndroid:/android/i.test(navigator.userAgent),isBlackberry:/blackberry/i.test(navigator.userAgent),isiOS:/like Mac OS/i.test(navigator.userAgent),touchSupported:false,gestureSupported:false,_eventTagNames:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},isEventSupported:function(e){var t=document.createElement(this._eventTagNames[e]||"div");e="on"+e;var n=e in t;if(!n){t.setAttribute(e,"return;");n=typeof t[e]=="function"}t=null;return n}},setElementData:function(e,t,n){if(this.isNothing(e.UtilData)){e.UtilData={}}e.UtilData[t]=n},getElementData:function(e,t,n){if(typeof n==="undefined"){n=null}if(this.isNothing(e.UtilData)){return n}if(this.isNothing(e.UtilData[t])){return n}return e.UtilData[t]},removeElementData:function(e,t){delete e.UtilData[t]},coalesce:function(){var e;for(e=0;e<arguments.length;e++){if(!this.isNothing(arguments[e])){return arguments[e]}}return null},registerNamespace:function(){var args=arguments,obj=null,i,j;for(i=0;i<args.length;++i){var ns=args[i];var nsParts=ns.split(".");var root=nsParts[0];eval("if (typeof "+root+' == "undefined"){'+root+" = {};} obj = "+root+";");for(j=1;j<nsParts.length;++j){obj[nsParts[j]]=obj[nsParts[j]]||{};obj=obj[nsParts[j]]}}},extend:function(e,t,n){if(this.isNothing(n)){n=true}if(e&&t&&this.isObject(t)){for(var r in t){if(n){e[r]=t[r]}else{if(typeof e[r]=="undefined"){e[r]=t[r]}}}}},swapArrayElements:function(e,t,n){var r=e[t];e[t]=e[n];e[n]=r},isObject:function(e){return typeof e=="object"},isNothing:function(e){if(typeof e==="undefined"||e===null){return true}return false},isFunction:function(e){return typeof e=="function"},isArray:function(e){return e&&Code.PhotoSwipe.Util.isFunction(e.pop)},isNumber:function(e){return typeof e=="number"},isString:function(e){return typeof e=="string"},trim:function(e){var t=new RegExp(/\s+?/);return e.replace(t,"")}};if(Code.PhotoSwipe.Util.browser.webkit){var test3DEl=document.createElement("div");Code.PhotoSwipe.Util.browser.is3dSupported=!Code.PhotoSwipe.Util.isNothing(test3DEl.style.WebkitPerspective)}Code.PhotoSwipe.Util.browser.touchSupported=Code.PhotoSwipe.Util.browser.isEventSupported("touchstart");Code.PhotoSwipe.Util.browser.gestureSupported=Code.PhotoSwipe.Util.browser.isEventSupported("gesturestart")})(window);(function(e,t){t.extend(t,{DOM:{resetTranslate:function(e){if(t.browser.webkit){if(t.browser.is3dSupported){$(e).css({webkitTransform:"translate3d(0px, 0px, 0px)"})}else{$(e).css({webkitTransform:"translate(0px, 0px)"})}}else{$(e).css({webkitTransform:"translate(0px, 0px)",MozTransform:"translate(0px, 0px)",transform:"translate(0px, 0px)"})}},createElement:function(e,t,n){var r=$("<"+e+"></"+e+">");if(t!==undefined)r.attr(t);if(n!==undefined)r.append(n);return r[0]},appendChild:function(e,t){$(t).append(e)},appendText:function(e,t){$(t).text(e)},appendToBody:function(e){$("body").append(e)},removeChild:function(e,t){$(e).empty().remove()},removeChildren:function(e){$(e).empty()},hasAttribute:function(e,n){return t.isNothing($(e).attr(n))},getAttribute:function(e,t){return $(e).attr(t)},setAttribute:function(e,t,n){$(e).attr(t,n)},removeAttribute:function(e,t){$(e).removeAttr(t)},addClass:function(e,t){$(e).addClass(t)},removeClass:function(e,t){$(e).removeClass(t)},hasClass:function(e,t){$(e).hasClass(t)},setStyle:function(e,n,r){if(t.isObject(n)){$(e).css(n)}else{$(e).css(n,r)}},getStyle:function(e,t){return $(e).css(t)},hide:function(e){$(e).hide()},show:function(e){$(e).show()},width:function(e,n){if(!t.isNothing(n)){$(e).width(n)}return $(e).width()},outerWidth:function(e){return $(e).outerWidth()},height:function(e,n){if(!t.isNothing(n)){$(e).height(n)}return $(e).height()},outerHeight:function(e){return $(e).outerHeight()},documentWidth:function(){return $(document.documentElement).width()},documentHeight:function(){return $(document.documentElement).height()},bodyWidth:function(){return $(document.body).width()},bodyHeight:function(){return $(document.body).height()},windowWidth:function(){if(!e.innerWidth){return $(e).width()}return e.innerWidth},windowHeight:function(){if(!e.innerHeight){return $(e).height()}return e.innerHeight},windowScrollLeft:function(){if(!e.pageXOffset){return $(e).scrollLeft()}return e.pageXOffset},windowScrollTop:function(){if(!e.pageYOffset){return $(e).scrollTop()}return e.pageYOffset},addEventListener:function(e,t,n){$(e).bind(t,n)},removeEventListener:function(e,t,n){$(e).unbind(t,n)},getMousePosition:function(e){var t={x:e.pageX,y:e.pageY};return t},getTouchEvent:function(e){return e.originalEvent}}})})(window,Code.PhotoSwipe.Util);(function(e,t){t.extend(t,{Animation:{stopFade:function(e){$(e).stop(true,true)},fadeIn:function(e,n,r,i){n=t.coalesce(n,1);r=t.coalesce(r,500);$(e).fadeTo(r,n,i)},fadeOut:function(e,n,r){if(t.isNothing(n)){n=500}$(e).fadeTo(n,0,r)},slideBy:function(e,n,r,i,s){if(t.isNothing(i)){i=500}var o;if(jQuery.fn.translation){o={left:"+="+n+"px",top:"+="+r+"px",useTranslate3d:t.browser.is3dSupported}}else{o={left:"+="+n+"px",top:"+="+r+"px"}}$(e).animate(o,i,s)}}})})(window,Code.PhotoSwipe.Util);(function(){Code.PhotoSwipe.EventClass=SimpleClass.extend({_listeners:null,init:function(){this._listeners={}},addEventListener:function(e,t){if(typeof this._listeners[e]==="undefined"){this._listeners[e]=[]}this._listeners[e].push(t)},dispatchEvent:function(e){if(typeof e=="string"){e={type:e}}if(!e.target){e.target=this}if(!e.type){throw new Error("Event object missing 'type' property.")}if(this._listeners[e.type]instanceof Array){var t=this._listeners[e.type];for(var n=0,r=t.length;n<r;n++){t[n].call(this,e)}}},removeEventListener:function(e,t){if(this._listeners[e]instanceof Array){var n=this._listeners[e];for(var r=0,i=n.length;r<i;r++){if(n[r]===t){n.splice(r,1);break}}}}})})();(function(e,t){Code.PhotoSwipe.ElementClass=Code.PhotoSwipe.EventClass.extend({el:null,settings:null,isHidden:null,fadeInHandler:null,fadeOutHandler:null,init:function(e){this._super();this.settings={opacity:1,fadeInSpeed:250,fadeOutSpeed:500};t.extend(this.settings,e);this.fadeInHandler=this.postFadeIn.bind(this);this.fadeOutHandler=this.postFadeOut.bind(this);this.isHidden=true},resetPosition:function(){},show:function(){this.stopFade();t.DOM.setStyle(this.el,"opacity",this.settings.opacity);t.DOM.show(this.el);this.postShow()},postShow:function(){this.isHidden=false;this.addEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onShow)},fadeIn:function(){t.DOM.setStyle(this.el,"opacity",0);this.fadeInFromCurrentOpacity()},fadeInFromCurrentOpacity:function(){this.stopFade();this.isHidden=false;t.DOM.show(this.el);t.Animation.fadeIn(this.el,this.settings.opacity,this.settings.fadeInSpeed,this.fadeInHandler)},postFadeIn:function(e){if(this.isHidden){return}this.addEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onFadeIn)},hide:function(){this.stopFade();t.DOM.hide(this.el);this.postHide()},postHide:function(){this.isHidden=true;this.removeEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onHide)},fadeOut:function(){this.stopFade();this.isHidden=true;t.Animation.fadeOut(this.el,this.settings.fadeOutSpeed,this.fadeOutHandler)},postFadeOut:function(e){if(!this.isHidden){return}t.DOM.hide(this.el);this.removeEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onFadeOut)},stopFade:function(){t.Animation.stopFade(this.el)},addEventListeners:function(){},removeEventListeners:function(){}});Code.PhotoSwipe.ElementClass.EventTypes={onShow:"onShow",onHide:"onHide",onClick:"onClick",onFadeIn:"onFadeIn",onFadeOut:"onFadeOut"}})(window,Code.PhotoSwipe.Util);(function(e,t){Code.PhotoSwipe.FullSizeImageClass=Code.PhotoSwipe.EventClass.extend({el:null,index:null,naturalWidth:null,naturalHeight:null,src:null,caption:null,metaData:null,scaleMethod:null,isLandscape:null,isLoading:null,hasLoaded:null,loadEventHandler:null,init:function(e,n,r,i,s){this._super();this.index=e;this.naturalWidth=0;this.naturalHeight=0;this.src=r;this.caption=i;this.metaData=t.coalesce(s,{});this.isLandscape=false;this.isLoading=false;this.hasLoaded=false;this.scaleMethod=n;this.loadEventHandler=this.onLoad.bind(this)},load:function(){this.isLoading=true;this.el=new Image;t.DOM.addClass(this.el,"ps-full-size-image");this.el.onload=this.loadEventHandler;this.el.src=this.src},onLoad:function(){this.naturalWidth=t.coalesce(this.el.naturalWidth,this.el.width);this.naturalHeight=t.coalesce(this.el.naturalHeight,this.el.height);this.isLandscape=this.naturalWidth>this.naturalHeight;this.isLoading=false;this.hasLoaded=true;this.dispatchEvent(Code.PhotoSwipe.FullSizeImageClass.EventTypes.onLoad)}});Code.PhotoSwipe.FullSizeImageClass.EventTypes={onLoad:"onLoad"}})(window,Code.PhotoSwipe.Util);(function(e,t){Code.PhotoSwipe.DocumentOverlayClass=Code.PhotoSwipe.ElementClass.extend({init:function(e){this.settings={zIndex:1e3};t.extend(this.settings,e);this._super(e);this.el=t.DOM.createElement("div",{"class":Code.PhotoSwipe.DocumentOverlayClass.CssClasses.documentOverlay},"");t.DOM.setStyle(this.el,{left:0,position:"absolute",zIndex:this.settings.zIndex,top:0});t.DOM.hide(this.el);t.DOM.appendToBody(this.el)},resetPosition:function(){t.DOM.width(this.el,t.DOM.bodyWidth());t.DOM.height(this.el,t.DOM.bodyHeight())}});Code.PhotoSwipe.DocumentOverlayClass.CssClasses={documentOverlay:"ps-document-overlay"}})(window,Code.PhotoSwipe.Util);(function(e,t){Code.PhotoSwipe.ViewportClass=Code.PhotoSwipe.ElementClass.extend({touchStartPoint:null,touchStartTime:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,gestureStartHandler:null,gestureChangeHandler:null,gestureEndHandler:null,isGesture:null,mouseDownHandler:null,mouseUpHandler:null,init:function(e){this.settings={swipeThreshold:500,swipeTimeThreshold:250,zIndex:1e3};t.extend(this.settings,e);this._super(this.settings);this.touchStartPoint={x:0,y:0};if(t.browser.touchSupported){this.touchStartHandler=this.onTouchStart.bind(this);this.touchMoveHandler=this.onTouchMove.bind(this);this.touchEndHandler=this.onTouchEnd.bind(this)}if(t.browser.gestureSupported){this.gestureStartHandler=this.onGestureStart.bind(this);this.gestureChangeHandler=this.onGestureChange.bind(this);this.gestureEndHandler=this.onGestureEnd.bind(this)}this.mouseDownHandler=this.onMouseDown.bind(this);this.mouseUpHandler=this.onMouseUp.bind(this);this.el=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ViewportClass.CssClasses.viewport,"data-role":"dialog"},"");t.DOM.setStyle(this.el,{position:"absolute",left:0,zIndex:this.settings.zIndex,overflow:"hidden"});t.DOM.hide(this.el);t.DOM.appendToBody(this.el)},resetPosition:function(){t.DOM.setStyle(this.el,{top:t.DOM.windowScrollTop()+"px"});t.DOM.width(this.el,t.DOM.bodyWidth());t.DOM.height(this.el,t.DOM.windowHeight())},addEventListeners:function(){if(t.browser.touchSupported){t.DOM.addEventListener(this.el,"touchstart",this.touchStartHandler);t.DOM.addEventListener(this.el,"touchmove",this.touchMoveHandler);t.DOM.addEventListener(this.el,"touchend",this.touchEndHandler)}if(t.browser.gestureSupported){t.DOM.addEventListener(this.el,"gesturestart",this.gestureStartHandler);t.DOM.addEventListener(this.el,"gesturechange",this.gestureChangeHandler);t.DOM.addEventListener(this.el,"gestureend",this.gestureEndHandler)}t.DOM.addEventListener(this.el,"mousedown",this.mouseDownHandler);t.DOM.addEventListener(this.el,"mouseup",this.mouseUpHandler)},removeEventListeners:function(){if(t.browser.touchSupported){t.DOM.removeEventListener(this.el,"touchstart",this.touchStartHandler);t.DOM.removeEventListener(this.el,"touchmove",this.touchMoveHandler);t.DOM.removeEventListener(this.el,"touchend",this.touchEndHandler)}if(t.browser.gestureSupported){t.DOM.removeEventListener(this.el,"gesturestart",this.gestureStartHandler);t.DOM.removeEventListener(this.el,"gesturechange",this.gestureChangeHandler);t.DOM.removeEventListener(this.el,"gestureend",this.gestureEndHandler)}t.DOM.removeEventListener(this.el,"mousedown",this.mouseDownHandler);t.DOM.removeEventListener(this.el,"mouseup",this.mouseUpHandler)},getTouchPoint:function(e){return{x:e[0].pageX,y:e[0].pageY}},onGestureStart:function(e){e.preventDefault();var n=t.DOM.getTouchEvent(e);this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.gestureStart,scale:n.scale,rotation:n.rotation})},onGestureChange:function(e){e.preventDefault();var n=t.DOM.getTouchEvent(e);this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.gestureChange,scale:n.scale,rotation:n.rotation})},onGestureEnd:function(e){e.preventDefault();var n=t.DOM.getTouchEvent(e);this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.gestureEnd,scale:n.scale,rotation:n.rotation})},onTouchStart:function(e){e.preventDefault();var n=t.DOM.getTouchEvent(e),r=n.touches;if(r.length>1){this.isGesture=true;return}this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.touchStart,point:this.getTouchPoint(r)});this.touchStartTime=new Date;this.isGesture=false;this.touchStartPoint=this.getTouchPoint(r)},onTouchMove:function(e){e.preventDefault();if(this.isGesture){return}var n=t.DOM.getTouchEvent(e),r=n.touches;this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.touchMove,point:this.getTouchPoint(r)})},onTouchEnd:function(e){e.preventDefault();if(this.isGesture){return}var n=t.DOM.getTouchEvent(e),r=!t.isNothing(n.changedTouches)?n.changedTouches:n.touches,i=this.getTouchPoint(r);this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.touchEnd,point:i});this.fireTouchEvent(this.touchStartPoint,i)},onMouseDown:function(e){e.preventDefault();this.touchStartTime=new Date;this.isGesture=false;this.touchStartPoint=t.DOM.getMousePosition(e)},onMouseUp:function(e){e.preventDefault();this.fireTouchEvent(this.touchStartPoint,t.DOM.getMousePosition(e))},fireTouchEvent:function(e,n){var r;var i=new Date,s=i-this.touchStartTime;if(s>this.settings.swipeTimeThreshold){return}var o=n.x-e.x;if(Math.abs(o)>=this.settings.swipeThreshold){if(o<0){r=Code.PhotoSwipe.ViewportClass.Actions.swipeLeft}else{r=Code.PhotoSwipe.ViewportClass.Actions.swipeRight}}else{r=Code.PhotoSwipe.ViewportClass.Actions.click}if(t.isNothing(r)){return}this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:r})}});Code.PhotoSwipe.ViewportClass.CssClasses={viewport:"ps-viewport"};Code.PhotoSwipe.ViewportClass.Actions={click:"click",swipeLeft:"swipeLeft",swipeRight:"swipeRight",touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",gestureStart:"gestureStart",gestureChange:"gestureChange",gestureEnd:"gestureEnd"};Code.PhotoSwipe.ViewportClass.EventTypes={onTouch:"onTouch"}})(window,Code.PhotoSwipe.Util);(function(e,t,n){Code.PhotoSwipe.SliderItemClass=Code.PhotoSwipe.EventClass.extend({el:null,imageContainerEl:null,imageEl:null,parentEl:null,fullSizeImage:null,fullSizeImageLoadEventHandler:null,savedImageWidth:null,savedImageHeight:null,init:function(e){this._super();this.parentEl=e;this.fullSizeImageLoadEventHandler=this.onFullSizeImageLoad.bind(this);this.el=t.DOM.createElement("div",{"class":Code.PhotoSwipe.SliderItemClass.CssClasses.item+" "+Code.PhotoSwipe.SliderItemClass.CssClasses.loading},"");t.DOM.setStyle(this.el,{position:"absolute",overflow:"hidden",top:0});t.DOM.resetTranslate(this.el);t.DOM.appendChild(this.el,this.parentEl);this.imageContainerEl=t.DOM.createElement("div");t.DOM.setStyle(this.imageContainerEl,{position:"absolute",overflow:"hidden",top:0,left:0});t.DOM.appendChild(this.imageContainerEl,this.el);this.imageEl=new Image;t.DOM.setStyle(this.imageEl,{display:"block",position:"absolute",margin:0,padding:0});t.DOM.hide(this.imageEl);t.DOM.appendChild(this.imageEl,this.imageContainerEl)},resetPosition:function(e,n,r){t.DOM.width(this.el,e);t.DOM.height(this.el,n);t.DOM.setStyle(this.el,"left",r+"px");t.DOM.width(this.imageContainerEl,e);t.DOM.height(this.imageContainerEl,n);this.resetImagePosition()},resetImagePosition:function(){if(t.isNothing(this.fullSizeImage)){return}var e=t.DOM.getAttribute(this.imageEl,"src");var n,r,i,s,o,u=t.DOM.width(this.el),a=t.DOM.height(this.el);if(this.fullSizeImage.isLandscape){n=u/this.fullSizeImage.naturalWidth}else{n=a/this.fullSizeImage.naturalHeight}r=Math.round(this.fullSizeImage.naturalWidth*n);i=Math.round(this.fullSizeImage.naturalHeight*n);if(this.fullSizeImage.scaleMethod==="zoom"){n=1;if(i<a){n=a/i}else if(r<u){n=u/r}if(n!==1){r=Math.round(r*n);i=Math.round(i*n)}}else if(this.fullSizeImage.scaleMethod==="fit"){n=1;if(r>u){n=u/r}else if(i>a){n=a/i}if(n!==1){r=Math.round(r*n);i=Math.round(i*n)}}s=(a-i)/2+"px";o=(u-r)/2+"px";t.DOM.width(this.imageEl,r);t.DOM.height(this.imageEl,i);t.DOM.setStyle(this.imageEl,{top:s,left:o});t.DOM.show(this.imageEl);this.savedImageWidth=r;this.savedImageHeight=i},setFullSizeImage:function(e){this.fullSizeImage=e;t.DOM.removeClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.loading);t.DOM.removeClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.imageError);if(t.isNothing(this.fullSizeImage)){this.fullSizeImage=null;t.DOM.addClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.imageError);this.hideImage();return}if(!this.fullSizeImage.hasLoaded){t.DOM.addClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.loading);this.hideImage();if(!this.fullSizeImage.isLoading){this.fullSizeImage.addEventListener(n.EventTypes.onLoad,this.fullSizeImageLoadEventHandler);this.fullSizeImage.load()}return}t.DOM.setAttribute(this.imageEl,"src",this.fullSizeImage.src);this.resetImagePosition();this.dispatchEvent(Code.PhotoSwipe.SliderItemClass.EventTypes.onFullSizeImageDisplay)},onFullSizeImageLoad:function(e){e.target.removeEventListener(n.EventTypes.onLoad,this.fullSizeImageLoadEventHandler);if(t.isNothing(this.fullSizeImage)||e.target.index!==this.fullSizeImage.index){this.dispatchEvent({type:Code.PhotoSwipe.SliderItemClass.EventTypes.onFullSizeImageLoadAnomaly,target:this,fullSizeImage:e.target})}else{this.setFullSizeImage(e.target)}},hideImage:function(){t.DOM.removeAttribute(this.imageEl,"src");t.DOM.hide(this.imageEl)}});Code.PhotoSwipe.SliderItemClass.CssClasses={item:"ps-slider-item",loading:"ps-slider-item-loading",imageError:"ps-slider-item-image-error"};Code.PhotoSwipe.SliderItemClass.EventTypes={onFullSizeImageDisplay:"onFullSizeImageDisplay",onFullSizeImageLoadAnomaly:"onFullSizeImageLoadAnomaly"}})(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.FullSizeImageClass);(function(e,t,n){Code.PhotoSwipe.SliderClass=Code.PhotoSwipe.ElementClass.extend({parentEl:null,parentElWidth:null,parentElHeight:null,items:null,scaleEl:null,lastScaleValue:null,previousItem:null,currentItem:null,nextItem:null,hasBounced:null,lastShowAction:null,bounceSlideBy:null,showNextEndEventHandler:null,showPreviousEndEventHandler:null,bounceStepOneEventHandler:null,bounceStepTwoEventHandler:null,sliderFullSizeImageLoadAnomalyEventHandler:null,init:function(e,r){this.settings={slideSpeed:250};t.extend(this.settings,e);this._super(this.settings);this.parentEl=r;this.hasBounced=false;this.showNextEndEventHandler=this.onShowNextEnd.bind(this);this.showPreviousEndEventHandler=this.onShowPreviousEnd.bind(this);this.bounceStepOneEventHandler=this.onBounceStepOne.bind(this);this.bounceStepTwoEventHandler=this.onBounceStepTwo.bind(this);this.sliderFullSizeImageLoadAnomalyEventHandler=this.onSliderFullSizeImageLoadAnomaly.bind(this);this.el=t.DOM.createElement("div",{"class":Code.PhotoSwipe.SliderClass.CssClasses.slider},"");t.DOM.setStyle(this.el,{position:"absolute",top:0});t.DOM.hide(this.el);t.DOM.appendChild(this.el,r);this.items=[];this.items.push(new n(this.el));this.items.push(new n(this.el));this.items.push(new n(this.el));this.previousItem=this.items[0];this.currentItem=this.items[1];this.nextItem=this.items[2]},addEventListeners:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.addEventListener(n.EventTypes.onFullSizeImageLoadAnomaly,this.sliderFullSizeImageLoadAnomalyEventHandler)}},removeEventListeners:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.removeEventListener(n.EventTypes.onFullSizeImageLoadAnomaly,this.sliderFullSizeImageLoadAnomalyEventHandler)}},resetPosition:function(){t.DOM.show(this.currentItem.imageContainerEl);this.parentElWidth=t.DOM.width(this.parentEl);this.parentElHeight=t.DOM.height(this.parentEl);t.DOM.width(this.el,this.parentElWidth*3);t.DOM.height(this.el,this.parentElHeight);this.previousItem.resetPosition(this.parentElWidth,this.parentElHeight,0);this.currentItem.resetPosition(this.parentElWidth,this.parentElHeight,this.parentElWidth);this.nextItem.resetPosition(this.parentElWidth,this.parentElHeight,this.parentElWidth*2);this.center()},center:function(){t.DOM.resetTranslate(this.el);t.DOM.setStyle(this.el,{left:this.parentElWidth*-1+"px"})},setCurrentFullSizeImage:function(e){this.currentItem.setFullSizeImage(e);this.dispatchDisplayCurrentFullSizeImage()},setPreviousAndNextFullSizeImages:function(e,t){this.nextItem.setFullSizeImage(t);this.previousItem.setFullSizeImage(e)},showNext:function(){this.lastShowAction=Code.PhotoSwipe.SliderClass.ShowActionTypes.next;this.hasBounced=false;if(t.isNothing(this.nextItem.fullSizeImage)){this.bounce();return}var e=this.parentElWidth*-1;t.Animation.slideBy(this.el,e,0,this.settings.slideSpeed,this.showNextEndEventHandler)},showPrevious:function(){this.lastShowAction=Code.PhotoSwipe.SliderClass.ShowActionTypes.previous;this.hasBounced=false;if(t.isNothing(this.previousItem.fullSizeImage)){this.bounce();return}var e=this.parentElWidth;t.Animation.slideBy(this.el,e,0,this.settings.slideSpeed,this.showPreviousEndEventHandler)},bounce:function(){t.DOM.show(this.currentItem.imageContainerEl);this.hasBounced=true;this.bounceSlideBy=this.parentElWidth/2;t.Animation.slideBy(this.el,this.lastShowAction===Code.PhotoSwipe.SliderClass.ShowActionTypes.previous?this.bounceSlideBy:this.bounceSlideBy*-1,0,this.settings.slideSpeed,this.bounceStepOneEventHandler)},onBounceStepOne:function(e){t.Animation.slideBy(this.el,this.lastShowAction===Code.PhotoSwipe.SliderClass.ShowActionTypes.previous?this.bounceSlideBy*-1:this.bounceSlideBy,0,this.settings.slideSpeed,this.bounceStepTwoEventHandler)},onBounceStepTwo:function(e){this.dispatchDisplayCurrentFullSizeImage()},onShowNextEnd:function(){t.DOM.show(this.currentItem.imageContainerEl);t.swapArrayElements(this.items,1,2);this.currentItem=this.items[1];this.nextItem=this.items[2];var e=this.parentElWidth;t.DOM.setStyle(this.currentItem.el,"left",e+"px");t.DOM.setStyle(this.nextItem.el,"left",e*2+"px");this.center();this.dispatchDisplayCurrentFullSizeImage()},onShowPreviousEnd:function(){t.DOM.show(this.currentItem.imageContainerEl);t.swapArrayElements(this.items,1,0);this.currentItem=this.items[1];this.previousItem=this.items[0];t.DOM.setStyle(this.currentItem.el,"left",this.parentElWidth+"px");t.DOM.setStyle(this.previousItem.el,"left","0px");this.center();this.dispatchDisplayCurrentFullSizeImage()},onSliderFullSizeImageLoadAnomaly:function(e){var n=e.fullSizeImage;if(!t.isNothing(this.currentItem.fullSizeImage)){if(this.currentItem.fullSizeImage.index===n.index){this.currentItem.setFullSizeImage(n);this.dispatchDisplayCurrentFullSizeImage();return}}if(!t.isNothing(this.nextItem.fullSizeImage)){if(this.nextItem.fullSizeImage.index===n.index){this.nextItem.setFullSizeImage(n);return}}if(!t.isNothing(this.previousItem.fullSizeImage)){if(this.previousItem.fullSizeImage.index===n.index){this.previousItem.setFullSizeImage(n);return}}},dispatchDisplayCurrentFullSizeImage:function(){this.dispatchEvent({type:Code.PhotoSwipe.SliderClass.EventTypes.onDisplayCurrentFullSizeImage,target:this,fullSizeImage:this.currentItem.fullSizeImage})}});Code.PhotoSwipe.SliderClass.CssClasses={slider:"ps-slider"};Code.PhotoSwipe.SliderClass.ShowActionTypes={next:"next",previous:"previous"};Code.PhotoSwipe.SliderClass.EventTypes={onDisplayCurrentFullSizeImage:"onDisplayCurrentFullSizeImage"}})(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.SliderItemClass);(function(e,t){Code.PhotoSwipe.CaptionClass=Code.PhotoSwipe.ElementClass.extend({contentEl:null,touchMoveHandler:null,captionValue:null,init:function(e){this.settings={position:"top",zIndex:1e3};t.extend(this.settings,e);this._super(this.settings);this.captionValue="";this.touchMoveHandler=this.onTouchMove.bind(this);var n=Code.PhotoSwipe.CaptionClass.CssClasses.caption;if(this.settings.position==="bottom"){n=n+" "+Code.PhotoSwipe.CaptionClass.CssClasses.bottom}this.el=t.DOM.createElement("div",{"class":n},"");t.DOM.setStyle(this.el,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex,opacity:0});t.DOM.hide(this.el);t.DOM.appendToBody(this.el);this.contentEl=t.DOM.createElement("div",{"class":Code.PhotoSwipe.CaptionClass.CssClasses.content},"");t.DOM.appendChild(this.contentEl,this.el)},addEventListeners:function(){if(t.browser.touchSupported){t.DOM.addEventListener(this.el,"touchmove",this.touchMoveHandler)}},removeEventListeners:function(){if(t.browser.touchSupported){t.DOM.removeEventListener(this.el,"touchmove",this.touchMoveHandler)}},onTouchMove:function(e){e.preventDefault()},resetPosition:function(){var e;if(this.settings.position==="bottom"){e=t.DOM.windowHeight()-t.DOM.outerHeight(this.el)+t.DOM.windowScrollTop()}else{e=t.DOM.windowScrollTop()}t.DOM.setStyle(this.el,"top",e+"px");t.DOM.width(this.el,t.DOM.bodyWidth())},setCaptionValue:function(e){t.DOM.removeChildren(this.contentEl);e=t.coalesce(e," ");if(t.isObject(e)){t.DOM.appendChild(e,this.contentEl)}else{if(e===""){e=" "}t.DOM.appendText(e,this.contentEl)}this.captionValue=e===" "?"":e}});Code.PhotoSwipe.CaptionClass.CssClasses={caption:"ps-caption",bottom:"ps-caption-bottom",content:"ps-caption-content"}})(window,Code.PhotoSwipe.Util);(function(e,t){Code.PhotoSwipe.ToolbarClass=Code.PhotoSwipe.ElementClass.extend({closeEl:null,previousEl:null,nextEl:null,playEl:null,logoEl:null,top10El:null,aphotoEl:null,fblikeEl:null,fbshareEl:null,clickHandler:null,touchStartHandler:null,touchMoveHandler:null,touched:null,isNextActive:null,isPreviousActive:null,init:function(e){this.settings={position:"bottom",hideClose:false,zIndex:1e3};t.extend(this.settings,e);this._super(this.settings);this.isNextActive=true;this.isPreviousActive=true;this.touched=false;this.clickHandler=this.onClick.bind(this);if(t.browser.touchSupported){this.touchMoveHandler=this.onTouchMove.bind(this);this.touchStartHandler=this.onTouchStart.bind(this)}var n=Code.PhotoSwipe.ToolbarClass.CssClasses.caption;if(this.settings.position==="top"){n=n+" "+Code.PhotoSwipe.ToolbarClass.CssClasses.top}this.el=t.DOM.createElement("div",{"class":n},"");t.DOM.setStyle(this.el,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex,display:"table",opacity:0});t.DOM.hide(this.el);t.DOM.appendToBody(this.el);this.logoEl=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.logo+" menuItem"},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');t.DOM.appendChild(this.logoEl,this.el);this.top10El=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.top10+" menuItem"},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');t.DOM.appendChild(this.top10El,this.el);this.aphotoEl=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.aphoto+" menuItem"},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');t.DOM.appendChild(this.aphotoEl,this.el);this.closeEl=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.close+" menuItem"},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');if(this.settings.hideClose){t.DOM.hide(this.closeEl)}t.DOM.appendChild(this.closeEl,this.el);this.fblikeEl=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.fblike+" menuItem"},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');t.DOM.appendChild(this.fblikeEl,this.el);this.fbshareEl=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.fbshare+" menuItem"},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');t.DOM.appendChild(this.fbshareEl,this.el)},postFadeIn:function(e){if(this.isHidden){return}t.DOM.setStyle(this.el,{display:"table"});this._super(this.settings)},addEventListeners:function(){if(t.browser.touchSupported){if(!t.browser.isBlackberry){t.DOM.addEventListener(this.el,"touchstart",this.touchStartHandler)}t.DOM.addEventListener(this.el,"touchmove",this.touchMoveHandler)}t.DOM.addEventListener(this.el,"click",this.clickHandler)},removeEventListeners:function(){if(t.browser.touchSupported){if(!t.browser.isBlackberry){t.DOM.removeEventListener(this.el,"touchstart",this.touchStartHandler)}t.DOM.removeEventListener(this.el,"touchmove",this.touchMoveHandler)}t.DOM.removeEventListener(this.el,"click",this.clickHandler)},onTouchStart:function(e){e.preventDefault();this.touched=true;this.handleClick(e)},onTouchMove:function(e){e.preventDefault()},onClick:function(e){if(this.touched){return}this.handleClick(e)},handleClick:function(e){var n;switch(e.target.parentNode){case this.previousEl:if(this.isPreviousActive){n=Code.PhotoSwipe.ToolbarClass.Actions.previous}break;case this.nextEl:if(this.isNextActive){n=Code.PhotoSwipe.ToolbarClass.Actions.next}break;case this.playEl:n=Code.PhotoSwipe.ToolbarClass.Actions.play;break;case this.closeEl:n=Code.PhotoSwipe.ToolbarClass.Actions.close;break;case this.logoEl:n=Code.PhotoSwipe.ToolbarClass.Actions.logo;break;case this.top10El:n=Code.PhotoSwipe.ToolbarClass.Actions.top10;break;case this.aphotoEl:n=Code.PhotoSwipe.ToolbarClass.Actions.aphoto;break;case this.fblikeEl:n=Code.PhotoSwipe.ToolbarClass.Actions.fblike;break;case this.fbshareEl:n=Code.PhotoSwipe.ToolbarClass.Actions.fbshare;break}if(t.isNothing(n)){return}this.dispatchEvent({type:Code.PhotoSwipe.ToolbarClass.EventTypes.onClick,target:this,action:n})},resetPosition:function(){var n;if(this.settings.position==="bottom"){n=t.DOM.windowHeight()-t.DOM.outerHeight(this.el)+t.DOM.windowScrollTop()}else{n=t.DOM.windowScrollTop()}t.DOM.setStyle(this.el,"top",n+"px");t.DOM.width(this.el,t.DOM.bodyWidth());if(e.orientation==90||e.orientation==-90){$(".ps-toolbar").css({top:"0",width:"70px",height:"100%",left:"auto",right:"0px"});$(".menuItem").css("display","table-row")}else{$(".ps-toolbar").css({top:n+"px",width:"100%",height:"44px",left:"0px",right:"auto"});$(".menuItem").css("display","table-cell")}},setNextState:function(e){if(e){t.DOM.addClass(this.nextEl,Code.PhotoSwipe.ToolbarClass.CssClasses.nextDisabled);this.isNextActive=false}else{t.DOM.removeClass(this.nextEl,Code.PhotoSwipe.ToolbarClass.CssClasses.nextDisabled);this.isNextActive=true}},setPreviousState:function(e){if(e){t.DOM.addClass(this.previousEl,Code.PhotoSwipe.ToolbarClass.CssClasses.previousDisabled);this.isPreviousActive=false}else{t.DOM.removeClass(this.previousEl,Code.PhotoSwipe.ToolbarClass.CssClasses.previousDisabled);this.isPreviousActive=true}}});Code.PhotoSwipe.ToolbarClass.CssClasses={caption:"ps-toolbar",top:"ps-toolbar-top",close:"ps-toolbar-close",previous:"ps-toolbar-previous",previousDisabled:"ps-toolbar-previous-disabled",next:"ps-toolbar-next",logo:"ps-toolbar-logo",top10:"ps-toolbar-top10",aphoto:"ps-toolbar-aphoto",fblike:"ps-toolbar-fblike",fbshare:"ps-toolbar-fbshare",nextDisabled:"ps-toolbar-next-disabled",play:"ps-toolbar-play",content:"ps-toolbar-content"};Code.PhotoSwipe.ToolbarClass.Actions={close:"close",previous:"previous",next:"next",logo:"logo",top10:"top10",aphoto:"aphoto",fblike:"fblike",fbshare:"fbshare",play:"play"};Code.PhotoSwipe.ToolbarClass.EventTypes={onClick:"onClick"}})(window,Code.PhotoSwipe.Util);(function(e,t,n,r){Code.PhotoSwipe.CaptionToolbarClass=Code.PhotoSwipe.EventClass.extend({toolbar:null,caption:null,isHidden:null,hasAddedEventListeners:null,toolbarClickEventHandler:null,init:function(e){this._super();this.settings={opacity:.8,fadeInSpeed:250,fadeOutSpeed:500,autoHideDelay:5e3,flipPosition:false,showEmptyCaptions:true,hideClose:false,zIndex:1e3};t.extend(this.settings,e);this.isHidden=true;this.hasAddedEventListeners=false;this.toolbarClickEventHandler=this.onToolbarClick.bind(this);this.toolbar=new r({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,opacity:this.settings.opacity,position:this.settings.flipPosition?"top":"bottom",hideClose:this.settings.hideClose,zIndex:this.settings.zIndex+1})},resetPosition:function(){this.toolbar.resetPosition()},addEventListeners:function(){if(this.hasAddedEventListeners){return}this.toolbar.addEventListener(r.EventTypes.onClick,this.toolbarClickEventHandler);this.hasAddedEventListeners=true},removeEventListeners:function(){this.toolbar.removeEventListener(r.EventTypes.onClick,this.toolbarClickEventHandler);this.hasAddedEventListeners=false},fadeIn:function(){this.stopAutoHideTimeout();this.stopFade();if(this.isHidden){this.isHidden=false;this.fadeInCaption();this.toolbar.fadeIn();e.setTimeout(this.onFadeIn.bind(this),this.settings.fadeInSpeed)}else{this.resetAutoHideTimeout()}},showCaption:function(){if(this.caption.captionValue===""){if(this.settings.showEmptyCaptions){}}else{}},fadeInCaption:function(){},onFadeIn:function(){this.addEventListeners();this.resetAutoHideTimeout()},fadeOut:function(){this.stopAutoHideTimeout();this.stopFade();this.isHidden=true;this.toolbar.fadeOut();e.setTimeout(this.onFadeOut.bind(this),this.settings.fadeOutSpeed)},onFadeOut:function(){},stopFade:function(){this.toolbar.stopFade()},hide:function(){this.stopAutoHideTimeout();this.stopFade();this.isHidden=true;this.removeEventListeners();this.toolbar.hide()},setCaptionValue:function(e){},resetAutoHideTimeout:function(){if(this.isHidden){return}this.stopAutoHideTimeout();if(this.settings.autoHideDelay>0){this.autoHideTimeout=e.setTimeout(this.fadeOut.bind(this),this.settings.autoHideDelay)}},stopAutoHideTimeout:function(){if(!t.isNothing(this.autoHideTimeout)){e.clearTimeout(this.autoHideTimeout)}},onToolbarClick:function(e){this.dispatchEvent({type:Code.PhotoSwipe.ToolbarClass.EventTypes.onClick,target:this,action:e.action})},setNextState:function(e){this.toolbar.setNextState(e)},setPreviousState:function(e){this.toolbar.setPreviousState(e)}})})(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.CaptionClass,Code.PhotoSwipe.ToolbarClass);(function(e,t){Code.PhotoSwipe.ZoomPanRotateClass=Code.PhotoSwipe.ElementClass.extend({containerEl:null,imageEl:null,parentEl:null,transformSettings:null,panStartingPoint:null,init:function(e,n,r){this.settings={maxZoom:5,minZoom:.5,adjustPanToZoom:true};t.extend(this.settings,e);this._super(e);this.parentEl=n;this.imageEl=r.cloneNode(false);this.transformSettings={startingScale:1,scale:1,startingRotation:0,rotation:0,startingTranslateX:0,startingTranslateY:0,translateX:0,translateY:0};this.el=t.DOM.createElement("div",{"class":Code.PhotoSwipe.ZoomPanRotateClass.CssClasses.documentOverlay},"");t.DOM.setStyle(this.el,{left:0,top:0,position:"absolute"});t.DOM.width(this.el,t.DOM.bodyWidth());t.DOM.height(this.el,t.DOM.windowHeight());this.containerEl=t.DOM.createElement("div");t.DOM.setStyle(this.containerEl,{left:0,top:0,position:"absolute"});t.DOM.width(this.containerEl,t.DOM.bodyWidth());t.DOM.height(this.containerEl,t.DOM.windowHeight());t.DOM.appendChild(this.imageEl,this.containerEl);t.DOM.appendChild(this.containerEl,this.el);t.DOM.appendChild(this.el,this.parentEl)},setStartingTranslateFromCurrentTranform:function(){var n=this.containerEl.style.webkitTransform.match(/translate\((.*?)\)/);if(!t.isNothing(n)){n=n[1].split(", ");this.transformSettings.startingTranslateX=e.parseInt(n[0]);this.transformSettings.startingTranslateY=e.parseInt(n[1])}},setStartingScaleAndRotation:function(e,t){var n=this.transformSettings.startingScale*e;if(this.settings.minZoom!==0&&n<this.settings.minZoom){n=this.settings.minZoom}else if(this.settings.maxZoom!==0&&n>this.settings.maxZoom){n=this.settings.maxZoom}this.transformSettings.startingScale=n;this.transformSettings.startingRotation=(this.transformSettings.startingRotation+t)%360},zoomRotate:function(e,t){var n=this.transformSettings.startingScale*e;if(this.settings.minZoom!==0&&n<this.settings.minZoom){n=this.settings.minZoom}else if(this.settings.maxZoom!==0&&n>this.settings.maxZoom){n=this.settings.maxZoom}this.transformSettings.scale=n;this.transformSettings.rotation=this.transformSettings.startingRotation+t;this.applyTransform()},panStart:function(e){this.setStartingTranslateFromCurrentTranform();this.panStartingPoint={x:e.x,y:e.y}},pan:function(e){var t=e.x-this.panStartingPoint.x,n=e.y-this.panStartingPoint.y,r=this.settings.adjustPanToZoom?t/this.transformSettings.scale:t,i=n/this.transformSettings.scale?n/this.transformSettings.scale:n;this.transformSettings.translateX=this.transformSettings.startingTranslateX+r;this.transformSettings.translateY=this.transformSettings.startingTranslateY+i;this.applyTransform()},applyTransform:function(){this.containerEl.style.webkitTransform="scale("+this.transformSettings.scale+") rotate("+this.transformSettings.rotation%360+"deg) translate("+this.transformSettings.translateX+"px, "+this.transformSettings.translateY+"px)"},removeFromDOM:function(){t.DOM.removeChild(this.el,this.parentEl)}});Code.PhotoSwipe.ZoomPanRotateClass.CssClasses={documentOverlay:"ps-zoom-pan-rotate"}})(window,Code.PhotoSwipe.Util);(function(e,t,n,r,i,s,o,u,a,f,l){var c=Code.PhotoSwipe.EventClass.extend({fullSizeImages:null,documentOverlay:null,viewport:null,slider:null,captionAndToolbar:null,zoomPanRotate:null,settings:null,currentIndex:null,isBusy:null,isActive:null,currentHistoryHashValue:null,isBackEventSupported:null,slideshowTimeout:null,isSlideshowActive:null,lastShowPrevTrigger:null,backButtonClicked:null,viewportFadeInEventHandler:null,windowOrientationChangeEventHandler:null,windowScrollEventHandler:null,windowHashChangeHandler:null,keyDownEventHandler:null,viewportTouchEventHandler:null,viewportFadeOutEventHandler:null,sliderDisplayCurrentFullSizeImageEventHandler:null,toolbarClickEventHandler:null,orientationEventName:null,init:function(){this._super();this.currentIndex=0;this.isBusy=false;this.isActive=false;this.isSlideshowActive=false;this.backButtonClicked=false;this.settings={getImageSource:Code.PhotoSwipe.GetImageSource,getImageCaption:Code.PhotoSwipe.GetImageCaption,getImageMetaData:Code.PhotoSwipe.GetImageMetaData,fadeInSpeed:250,fadeOutSpeed:500,slideSpeed:250,swipeThreshold:50,swipeTimeThreshold:250,loop:true,slideshowDelay:3e3,imageScaleMethod:"fit",preventHide:false,zIndex:1e3,backButtonHideEnabled:true,jQueryMobile:!t.isNothing(e.jQuery)&&!t.isNothing(e.jQuery.mobile),jQueryMobileDialogHash:"&ui-state=dialog",allowUserZoom:true,allowRotationOnUserZoom:true,maxUserZoom:5,minUserZoom:.5,adjustUserPanToZoom:true,captionAndToolbarHide:false,captionAndToolbarHideOnSwipe:true,captionAndToolbarFlipPosition:false,captionAndToolbarAutoHideDelay:5e3,captionAndToolbarOpacity:.8,captionAndToolbarShowEmptyCaptions:true};if(t.browser.isAndroid){if(navigator.userAgent.indexOf("2.1")){this.isBackEventSupported=true}}if(!this.isBackEventSupported){this.isBackEventSupported="onhashchange"in e}if(this.settings.preventHide){this.settings.backButtonHideEnabled=false}this.viewportFadeInEventHandler=this.onViewportFadeIn.bind(this);this.windowOrientationChangeEventHandler=this.onWindowOrientationChange.bind(this);this.windowScrollEventHandler=this.onWindowScroll.bind(this);this.windowHashChangeHandler=this.onWindowHashChange.bind(this);this.keyDownEventHandler=this.onKeyDown.bind(this);this.viewportTouchEventHandler=this.onViewportTouch.bind(this);this.viewportFadeOutEventHandler=this.onViewportFadeOut.bind(this);this.sliderDisplayCurrentFullSizeImageEventHandler=this.onSliderDisplayCurrentFullSizeImage.bind(this);this.toolbarClickEventHandler=this.onToolbarClick.bind(this)},setOptions:function(e){t.extend(this.settings,e);if(this.settings.preventHide){this.settings.backButtonHideEnabled=false}},setImages:function(e){if(!t.isArray){throw"thumbEls is not an array"}this.currentIndex=0;this.fullSizeImages=[];for(var n=0;n<e.length;n++){var r=e[n];var s=new i(n,this.settings.imageScaleMethod,this.settings.getImageSource(r),this.settings.getImageCaption(r),this.settings.getImageMetaData(r));this.fullSizeImages.push(s)}},show:function(r){if(this.isBusy||this.isActive){return}if(!t.isNumber(r)){throw"startingIndex must be a number"}if(t.isNothing(this.fullSizeImages)){throw"need to set images before showing the gallery"}this.backButtonClicked=false;this.isActive=true;this.isBusy=true;this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.show;t.DOM.addClass(document.body,Code.PhotoSwipe.CssClasses.activeBody);r=e.parseInt(r);if(r<0||r>=this.fullSizeImages.length){r=0}this.currentIndex=r;if(t.isNothing(this.documentOverlay)){this.build()}else{this.resetPosition()}this.viewport.addEventListener(n.EventTypes.onFadeIn,this.viewportFadeInEventHandler);this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeShow);this.viewport.fadeIn()},build:function(){this.documentOverlay=new r({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,zIndex:this.settings.zIndex});this.viewport=new s({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,swipeThreshold:this.settings.swipeThreshold,swipeTimeThreshold:this.settings.swipeTimeThreshold,zIndex:this.settings.zIndex+1});this.slider=new o({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,slideSpeed:this.settings.slideSpeed},this.viewport.el);this.captionAndToolbar=new f({opacity:this.settings.captionAndToolbarOpacity,fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,autoHideDelay:this.settings.captionAndToolbarAutoHideDelay,flipPosition:this.settings.captionAndToolbarFlipPosition,showEmptyCaptions:this.settings.captionAndToolbarShowEmptyCaptions,hideClose:this.settings.preventHide,zIndex:this.settings.zIndex+3});this.resetPosition()},addEventListeners:function(){if(t.browser.isAndroid){this.orientationEventName="resize"}else{var n="onorientationchange"in e;this.orientationEventName=n?"orientationchange":"resize"}t.DOM.addEventListener(e,this.orientationEventName,this.windowOrientationChangeEventHandler);t.DOM.addEventListener(e,"scroll",this.windowScrollEventHandler);if(this.isBackEventSupported&&this.settings.backButtonHideEnabled){if(this.settings.jQueryMobile){e.location.hash=this.settings.jQueryMobileDialogHash}else{this.currentHistoryHashValue="PhotoSwipe"+(new Date).getTime().toString();e.location.hash=this.currentHistoryHashValue}t.DOM.addEventListener(e,"hashchange",this.windowHashChangeHandler)}t.DOM.addEventListener(document,"keydown",this.keyDownEventHandler);this.viewport.addEventListener(s.EventTypes.onTouch,this.viewportTouchEventHandler);this.slider.addEventListener(o.EventTypes.onDisplayCurrentFullSizeImage,this.sliderDisplayCurrentFullSizeImageEventHandler);this.captionAndToolbar.addEventListener(a.EventTypes.onClick,this.toolbarClickEventHandler)},removeEventListeners:function(){t.DOM.removeEventListener(e,this.orientationEventName,this.windowOrientationChangeEventHandler);t.DOM.removeEventListener(e,"scroll",this.windowScrollEventHandler);if(this.isBackEventSupported&&this.settings.backButtonHideEnabled){t.DOM.removeEventListener(e,"hashchange",this.windowHashChangeHandler)}t.DOM.removeEventListener(document,"keydown",this.keyDownEventHandler);this.viewport.removeEventListener(s.EventTypes.onTouch,this.viewportTouchEventHandler);this.slider.removeEventListener(o.EventTypes.onDisplayCurrentFullSizeImage,this.sliderDisplayCurrentFullSizeImageEventHandler);this.captionAndToolbar.removeEventListener(a.EventTypes.onClick,this.toolbarClickEventHandler)},onViewportFadeIn:function(e){this.viewport.removeEventListener(n.EventTypes.onFadeIn,this.viewportFadeInEventHandler);this.documentOverlay.show();this.slider.fadeIn();this.addEventListeners();this.slider.setCurrentFullSizeImage(this.fullSizeImages[this.currentIndex]);this.isBusy=false;this.dispatchEvent(Code.PhotoSwipe.EventTypes.onShow)},setSliderPreviousAndNextFullSizeImages:function(){var e,t=null,n=null;if(this.fullSizeImages.length>1){e=this.fullSizeImages.length-1;if(this.currentIndex===e){if(this.settings.loop){n=this.fullSizeImages[0]}t=this.fullSizeImages[this.currentIndex-1]}else if(this.currentIndex===0){n=this.fullSizeImages[this.currentIndex+1];if(this.settings.loop){t=this.fullSizeImages[e]}}else{n=this.fullSizeImages[this.currentIndex+1];t=this.fullSizeImages[this.currentIndex-1]}}this.slider.setPreviousAndNextFullSizeImages(t,n)},onKeyDown:function(e){this.stopSlideshow();if(e.keyCode===37){e.preventDefault();this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.keyboard;this.showPrevious()}else if(e.keyCode===39){e.preventDefault();this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.keyboard;this.showNext()}else if(e.keyCode===38||e.keyCode===40){e.preventDefault()}else if(e.keyCode===27){e.preventDefault();this.hide()}else if(e.keyCode===32){if(!this.settings.hideToolbar){this.toggleCaptionAndToolbar()}else{this.hide()}e.preventDefault()}},onWindowOrientationChange:function(e){this.resetPosition()},onWindowScroll:function(e){this.resetPosition()},onWindowHashChange:function(t){var n="#"+(this.settings.jQueryMobile?this.settings.jQueryMobileDialogHash:this.currentHistoryHashValue);if(e.location.hash!==n){this.backButtonClicked=true;this.hide()}},resetPosition:function(){this.removeZoomPanRotate();this.viewport.resetPosition();this.slider.resetPosition();this.documentOverlay.resetPosition();this.captionAndToolbar.resetPosition();this.dispatchEvent(Code.PhotoSwipe.EventTypes.onResetPosition)},canUserZoom:function(){if(!this.settings.allowUserZoom){return false}if(this.isBusy){return false}if(t.isNothing(this.slider.currentItem.fullSizeImage)){return false}if(!this.slider.currentItem.fullSizeImage.hasLoaded){return false}return true},isZoomActive:function(){return!t.isNothing(this.zoomPanRotate)},onViewportTouch:function(e){switch(e.action){case s.Actions.gestureStart:if(this.canUserZoom()){this.stopSlideshow();if(!this.isZoomActive()){this.zoomPanRotate=new l({maxZoom:this.settings.maxUserZoom,minZoom:this.settings.minUserZoom,adjustPanToZoom:this.settings.adjustUserPanToZoom},this.viewport.el,this.slider.currentItem.imageEl);t.DOM.resetTranslate(this.zoomPanRotate.containerEl);t.DOM.resetTranslate(this.zoomPanRotate.imageEl)}this.fadeOutCaptionAndToolbar()}break;case s.Actions.gestureChange:if(this.isZoomActive()){this.zoomPanRotate.zoomRotate(e.scale,this.settings.allowRotationOnUserZoom?e.rotation:0)}break;case s.Actions.gestureEnd:if(this.isZoomActive()){this.zoomPanRotate.setStartingScaleAndRotation(e.scale,this.settings.allowRotationOnUserZoom?e.rotation:0)}break;case s.Actions.touchStart:this.stopSlideshow();if(this.isZoomActive()){this.zoomPanRotate.panStart(e.point)}break;case s.Actions.touchMove:if(this.isZoomActive()){this.zoomPanRotate.pan(e.point)}break;case s.Actions.click:this.stopSlideshow();if(!this.settings.hideToolbar){this.toggleCaptionAndToolbar()}else{this.hide()}this.dispatchEvent(Code.PhotoSwipe.EventTypes.onViewportClick);break;case s.Actions.swipeLeft:this.stopSlideshow();this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.swipe;this.showNext();break;case s.Actions.swipeRight:this.stopSlideshow();this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.swipe;this.showPrevious();break}},onViewportFadeOut:function(e){this.viewport.removeEventListener(n.EventTypes.onFadeOut,this.viewportFadeOutEventHandler);this.isBusy=false;this.isActive=false;this.dispatchEvent(Code.PhotoSwipe.EventTypes.onHide);this.goBackInHistory()},hide:function(){if(this.isBusy||this.settings.preventHide){return}if(!this.isActive){return}this.isBusy=true;this.removeZoomPanRotate();this.removeEventListeners();this.documentOverlay.hide();this.captionAndToolbar.hide();this.slider.hide();t.DOM.removeClass(document.body,Code.PhotoSwipe.CssClasses.activeBody);this.viewport.addEventListener(n.EventTypes.onFadeOut,this.viewportFadeOutEventHandler);this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeHide);this.viewport.fadeOut()},hideImmediately:function(){if(!this.isActive){return}this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeHide);this.removeZoomPanRotate();this.removeEventListeners();this.documentOverlay.hide();this.captionAndToolbar.hide();this.slider.hide();this.viewport.hide();t.DOM.removeClass(document.body,Code.PhotoSwipe.CssClasses.activeBody);this.isBusy=false;this.isActive=false;this.dispatchEvent(Code.PhotoSwipe.EventTypes.onHide);this.goBackInHistory()},goBackInHistory:function(){if(this.isBackEventSupported&&this.settings.backButtonHideEnabled){if(!this.backButtonClicked){e.history.back()}}},showNext:function(){if(this.isBusy){return}this.isBusy=true;this.cleanUpZoomPanRotateForNextPrevious();this.setCaptionAndToolbarOnShowPreviousNext();this.slider.showNext();this.dispatchEvent(Code.PhotoSwipe.EventTypes.onShowNext)},showPrevious:function(){if(this.isBusy){return}this.isBusy=true;this.cleanUpZoomPanRotateForNextPrevious();this.setCaptionAndToolbarOnShowPreviousNext();if(this.wasUserZoomActive){t.DOM.hide(this.slider.currentItem.imageEl)}this.slider.showPrevious();this.dispatchEvent(Code.PhotoSwipe.EventTypes.onShowPrevious)},cleanUpZoomPanRotateForNextPrevious:function(){if(!t.isNothing(this.zoomPanRotate)){if(this.settings.loop){t.DOM.hide(this.slider.currentItem.imageEl)}else{if(this.currentIndex>0&&this.currentIndex<this.fullSizeImages.length-2){t.DOM.hide(this.slider.currentItem.imageEl)}}}this.removeZoomPanRotate()},setCaptionAndToolbarOnShowPreviousNext:function(){if(this.settings.captionAndToolbarHide){return}var e=false;switch(this.lastShowPrevTrigger){case Code.PhotoSwipe.ShowPrevTriggers.toolbar:e=true;break;case Code.PhotoSwipe.ShowPrevTriggers.slideshow:e=false;break;default:e=!this.settings.captionAndToolbarHideOnSwipe;break}if(e){this.captionAndToolbar.resetAutoHideTimeout()}else{this.fadeOutCaptionAndToolbar()}},onSliderDisplayCurrentFullSizeImage:function(e){this.currentIndex=e.fullSizeImage.index;if(!this.settings.captionAndToolbarHide){if(this.settings.loop){this.captionAndToolbar.setNextState(false);this.captionAndToolbar.setPreviousState(false)}else{if(this.currentIndex>=this.fullSizeImages.length-1){this.captionAndToolbar.setNextState(true)}else{this.captionAndToolbar.setNextState(false)}if(this.currentIndex<1){this.captionAndToolbar.setPreviousState(true)}else{this.captionAndToolbar.setPreviousState(false)}}this.captionAndToolbar.setCaptionValue(this.fullSizeImages[this.currentIndex].caption);var t=false;switch(this.lastShowPrevTrigger){case Code.PhotoSwipe.ShowPrevTriggers.toolbar:t=true;break;case Code.PhotoSwipe.ShowPrevTriggers.show:t=true;break;case Code.PhotoSwipe.ShowPrevTriggers.slideshow:t=false;break;default:t=!this.settings.captionAndToolbarHideOnSwipe;break}if(t){this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarShow);this.captionAndToolbar.fadeIn()}this.dispatchEvent(Code.PhotoSwipe.EventTypes.onDisplayImage)}this.lastShowPrevTrigger="";this.setSliderPreviousAndNextFullSizeImages();if(this.isSlideshowActive){this.fireSlideshowTimeout()}this.isBusy=false},toggleCaptionAndToolbar:function(){if(this.settings.captionAndToolbarHide){this.captionAndToolbar.hide();return}if(this.captionAndToolbar.isHidden){this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarShow);this.captionAndToolbar.fadeIn()}else{this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarHide);this.captionAndToolbar.fadeOut()}},fadeOutCaptionAndToolbar:function(){if(!this.settings.captionAndToolbarHide&&!this.captionAndToolbar.isHidden){this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarHide);this.captionAndToolbar.fadeOut()}},onToolbarClick:function(e){this.stopSlideshow();switch(e.action){case a.Actions.previous:this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.toolbar;this.showPrevious();break;case a.Actions.next:this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.toolbar;this.showNext();break;case a.Actions.play:this.startSlideshow();break;case a.Actions.logo:this.showlogo();break;case a.Actions.top10:this.showTop10();break;case a.Actions.aphoto:this.showAddPhoto();break;case a.Actions.fblike:this.showFBLike();break;case a.Actions.fbshare:this.showFBShare();break;default:this.hide();break}},startSlideshow:function(){if(this.isBusy){return}if(!t.isNothing(this.slideshowTimeout)){e.clearTimeout(this.slideshowTimeout)}this.removeZoomPanRotate();this.isSlideshowActive=true;this.fadeOutCaptionAndToolbar();this.fireSlideshowTimeout();this.dispatchEvent(Code.PhotoSwipe.EventTypes.onSlideshowStart)},stopSlideshow:function(){if(!t.isNothing(this.slideshowTimeout)){e.clearTimeout(this.slideshowTimeout)}this.isSlideshowActive=false;this.dispatchEvent(Code.PhotoSwipe.EventTypes.onSlideshowStop)},fireSlideshowTimeout:function(){var t=false;if(this.settings.loop){if(this.fullSizeImages.length>1){t=true}}else{if(this.currentIndex<this.fullSizeImages.length-1){t=true}}if(t){this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.slideshow;this.slideshowTimeout=e.setTimeout(this.showNext.bind(this),this.settings.slideshowDelay)}},removeZoomPanRotate:function(){if(t.isNothing(this.zoomPanRotate)){return}this.zoomPanRotate.removeFromDOM();this.zoomPanRotate=null}});Code.PhotoSwipe.CssClasses={activeBody:"ps-active"};Code.PhotoSwipe.ShowPrevTriggers={show:"show",toolbar:"toobar",swipe:"swipe",keyboard:"keyboard",slideshow:"slideshow"};Code.PhotoSwipe.EventTypes={onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onShowNext:"onShowNext",onShowPrevious:"onShowPrevious",onDisplayImage:"onDisplayImage",onResetPosition:"onResetPosition",onSlideshowStart:"onSlideshowStart",onSlideshowStop:"onSlideshowStop",onBeforeCaptionAndToolbarShow:"onBeforeCaptionAndToolbarShow",onBeforeCaptionAndToolbarHide:"onBeforeCaptionAndToolbarHide",onViewportClick:"onViewportClick"};Code.PhotoSwipe.GetImageSource=function(e){return e.href};Code.PhotoSwipe.GetImageCaption=function(e){if(e.nodeName==="IMG"){return t.DOM.getAttribute(e,"alt")}var n,r;for(n=0;n<e.childNodes.length;n++){r=e.childNodes[n];if(e.childNodes[n].nodeName==="IMG"){return t.DOM.getAttribute(r,"alt")}}};Code.PhotoSwipe.GetImageMetaData=function(e){return{}};Code.PhotoSwipe.Current=new c;Code.photoSwipe=function(e,n,r){var i=true;if(t.isNothing(e)){return}if(t.isNothing(n)){n=document.documentElement;i=false}if(t.isString(n)){n=document.documentElement.querySelector(n)}if(t.isNothing(n)){throw"Unable to find container element"}if(t.isString(e)){e=n.querySelectorAll(e)}if(t.isNothing(e)){return}var s=function(e){e.preventDefault();o(e.currentTarget)};var o=function(t){var n;for(n=0;n<e.length;n++){if(e[n]===t){break}}Code.PhotoSwipe.Current.show(n)};Code.PhotoSwipe.Current.setOptions(r);Code.PhotoSwipe.Current.setImages(e);if(i){n.addEventListener("click",function(n){if(n.target===n.currentTarget){return}n.preventDefault();var r=function(e,n,i){if(t.isNothing(e)||t.isNothing(n)||t.isNothing(i)){return null}if(e.nodeName===n){return e}if(e===i){return null}return r(e.parentNode,n,i)};var i=r(n.target,e[0].nodeName,n.currentTarget);if(t.isNothing(i)){return}o(i)},false)}else{for(var u=0;u<e.length;u++){var a=e[u];a.addEventListener("click",s,false)}}return e};if(!t.isNothing(e.jQuery)){e.jQuery.fn.photoSwipe=function(e){var t=this;Code.PhotoSwipe.Current.setOptions(e);Code.PhotoSwipe.Current.setImages(t);$(t).live("click",function(e){e.preventDefault();var n=$(t).index($(e.currentTarget));Code.PhotoSwipe.Current.show(n)})}}})(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.ElementClass,Code.PhotoSwipe.DocumentOverlayClass,Code.PhotoSwipe.FullSizeImageClass,Code.PhotoSwipe.ViewportClass,Code.PhotoSwipe.SliderClass,Code.PhotoSwipe.CaptionClass,Code.PhotoSwipe.ToolbarClass,Code.PhotoSwipe.CaptionToolbarClass,Code.PhotoSwipe.ZoomPanRotateClass)